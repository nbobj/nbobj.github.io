<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Spring Boot 2 官方指导手册译文 | XYZhi's学习笔记</title><meta name="keywords" content="springboot"><meta name="author" content="xyz"><meta name="copyright" content="xyz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="官方文档 Spring Boot 2.3.9.RELEASE Reference Documentation  Gradle 安装Spring Boot 与 Gradle 4 兼容。如果您还没有安装 Gradle，您可以按照 gradle.org 上的说明进行操作。 Spring Boot 依赖关系可以使用 org.springframework.boot group 声明。通常，你的项目向一个">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 2 官方指导手册译文">
<meta property="og:url" content="http://sv.pointcut.cc/blog/springboot/Spring%20Boot%202%20%E5%AE%98%E6%96%B9%E6%8C%87%E5%AF%BC%E6%89%8B%E5%86%8C%E8%AF%91%E6%96%87/index.html">
<meta property="og:site_name" content="XYZhi&#39;s学习笔记">
<meta property="og:description" content="官方文档 Spring Boot 2.3.9.RELEASE Reference Documentation  Gradle 安装Spring Boot 与 Gradle 4 兼容。如果您还没有安装 Gradle，您可以按照 gradle.org 上的说明进行操作。 Spring Boot 依赖关系可以使用 org.springframework.boot group 声明。通常，你的项目向一个">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XieYueZhi/cdn/md/1647876415-280c8d.jpeg">
<meta property="article:published_time" content="2021-11-26T12:00:08.000Z">
<meta property="article:modified_time" content="2022-03-23T09:03:56.062Z">
<meta property="article:author" content="xyz">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/XieYueZhi/cdn/md/1647876415-280c8d.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://sv.pointcut.cc/blog/springboot/Spring%20Boot%202%20%E5%AE%98%E6%96%B9%E6%8C%87%E5%AF%BC%E6%89%8B%E5%86%8C%E8%AF%91%E6%96%87/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"KRWXKP6RR8","apiKey":"c59315b71275333a604a497c8e21f06c","indexName":"blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: xyz","link":"链接: ","source":"来源: XYZhi's学习笔记","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Spring Boot 2 官方指导手册译文',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-23 17:03:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">301</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-list"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/XieYueZhi/cdn/md/1647876415-280c8d.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">XYZhi's学习笔记</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-list"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Spring Boot 2 官方指导手册译文</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-26T12:00:08.000Z" title="发表于 2021-11-26 20:00:08">2021-11-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-23T09:03:56.062Z" title="更新于 2022-03-23 17:03:56">2022-03-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">开源框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">19.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>72分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Spring Boot 2 官方指导手册译文"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/">官方文档</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.9.RELEASE/reference/htmlsingle/">Spring Boot 2.3.9.RELEASE Reference Documentation</a></p>
</blockquote>
<h3 id="Gradle-安装"><a href="#Gradle-安装" class="headerlink" title="Gradle 安装"></a>Gradle 安装</h3><p>Spring Boot 与 Gradle 4 兼容。如果您还没有安装 Gradle，您可以按照 <a target="_blank" rel="noopener" href="https://gradle.org/">gradle.org</a> 上的说明进行操作。</p>
<p>Spring Boot 依赖关系可以使用 <code>org.springframework.boot</code> <code>group</code> 声明。通常，你的项目向一个或多个<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-starter">启动器</a>声明依赖关系。Spring Boot 提供了一个有用的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#build-tool-plugins-gradle-plugin">Gradle 插件</a>，它可以用来简化依赖项声明并创建可执行的 <code>jar</code>。</p>
<blockquote>
<p><strong>Gradle Wrapper</strong></p>
<p>当您需要构建一个项目时，Gradle Wrapper 提供了一种“获取”Gradle 的好方法。它是一个小脚本和库，您可以在代码旁边提交，以引导构建过程。有关详细信息，请参阅 <a target="_blank" rel="noopener" href="https://docs.gradle.org/4.2.1/userguide/gradle_wrapper.html">docs.gradle.org&#x2F;4.2.1&#x2F;userguide&#x2F;gradle_wrapper.html</a>。</p>
</blockquote>
<p>下面的示例显示一个典型的 build.gradle 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    <span class="built_in">id</span> <span class="string">&#x27;org.springframework.boot&#x27;</span> version <span class="string">&#x27;2.0.2.RELEASE&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> <span class="string">&#x27;java&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line">    baseName = <span class="string">&#x27;myproject&#x27;</span></span><br><span class="line">    version =  <span class="string">&#x27;0.0.1-SNAPSHOT&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile(<span class="string">&quot;org.springframework.boot:spring-boot-starter-web&quot;</span>)</span><br><span class="line">    testCompile(<span class="string">&quot;org.springframework.boot:spring-boot-starter-test&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="从-Spring-Boot-的一个早期的版本升级"><a href="#从-Spring-Boot-的一个早期的版本升级" class="headerlink" title="从 Spring Boot 的一个早期的版本升级"></a>从 Spring Boot 的一个早期的版本升级</h3><p>如果您正在从早期的 Spring Boot 版本升级，请检查提供详细的升级说明的“<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide">迁移指南</a>”。还要检查<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/wiki">发行说明</a>，以获得每个版本的“新的和值得注意的”特性。</p>
<h2 id="开发你的第一个-Spring-Boot-应用程序"><a href="#开发你的第一个-Spring-Boot-应用程序" class="headerlink" title="开发你的第一个 Spring Boot 应用程序"></a>开发你的第一个 Spring Boot 应用程序</h2><p>本节描述如何开发一个简单的“Hello World!”web 应用程序突出了 Spring Boot 的一些关键特性。我们使用 Maven 来构建这个项目，因为大多数 IDE 都支持它。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://spring.io/">spring.io</a> 网站包含许多使用 Spring Boot 的“入门”<a target="_blank" rel="noopener" href="https://spring.io/guides">指南</a>。如果你需要解决一个具体的问题，先检查一下。<br> 要简化下面的步骤，你可以去 <a target="_blank" rel="noopener" href="https://start.spring.io/">start.spring.io</a> 并从依赖关系搜索器中选择“Web”启动器。这样做会生成一个新的项目结构，这样您就可以<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#getting-started-first-application-code">立即开始编写代码</a>。查看 <a target="_blank" rel="noopener" href="https://github.com/spring-io/initializr">Spring Initializr 文档</a>了解更多细节。</p>
</blockquote>
<p>在开始之前，打开一个终端并运行以下命令，以确保安装了有效的 Java 和 Maven 版本：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_102&quot;</span></span><br><span class="line">Java(<span class="variable constant_">TM</span>) <span class="variable constant_">SE</span> Runtime Environment (build <span class="number">1.8</span>.<span class="number">0_102</span>-b14)</span><br><span class="line">Java HotSpot(<span class="variable constant_">TM</span>) <span class="number">64</span>-Bit Server <span class="variable constant_">VM</span> (build <span class="number">25.102</span>-b14, mixed mode)</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mvn -v</span><br><span class="line">Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)</span><br><span class="line">Maven home: /usr/local/Cellar/maven/3.3.9/libexec</span><br><span class="line">Java version: 1.8.0_102, vendor: Oracle Corporation</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此示例需要在其自己的文件夹中创建。随后的指令假设您已经创建了一个合适的文件夹，并且它是您当前的目录。</p>
</blockquote>
<h3 id="创建-POM"><a href="#创建-POM" class="headerlink" title="创建 POM"></a>创建 POM</h3><p>我们需要从创建一个 Maven <code>pom.xml</code> 文件开始。<code>pom.xml</code> 是用于构建你的项目的“食谱”。打开你喜欢的文本编辑器并添加如下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Additional lines to be added here... --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>前面的清单应该给您一个生效的构建。您可以通过运行 <code>mvn package</code> 来测试它（现在，您可以忽略“<code>jar will be empty - no content was marked for inclusion!</code>”警告）。</p>
<blockquote>
<p>此时，您可以将项目导入到 IDE 中（大多数现代 Java IDE 都包含对 Maven 的内置支持）。为了简单起见，我们继续使用这个示例的纯文本编辑器。</p>
</blockquote>
<h3 id="添加类路径依赖项"><a href="#添加类路径依赖项" class="headerlink" title="添加类路径依赖项"></a>添加类路径依赖项</h3><p>Spring Boot 提供了一些“启动器”让你可以添加 <code>jar</code> 到你的类路径。我们的示例应用程序已经在 POM 的 <code>parent</code> 部分使用了 <code>spring-boot-starter-parent</code>。<code>spring-boot-starter-parent</code> 是一个特殊的启动器，它提供了有用的 Maven 默认值。它还提供了一个 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-dependency-management"><code>dependency-management</code></a> 部分，以便对于“有福的”依赖项你可以省略版本标记。</p>
<p>其它“启动器”提供在开发特定类型的应用程序时可能需要的依赖项。由于我们正在开发一个 web 应用程序，所以我们添加了一个 <code>spring-boot-starter-web</code> 依赖项。在此之前，我们可以通过运行以下命令查看当前所拥有的内容：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mvn dependency:tree</span><br><span class="line"></span><br><span class="line">[<span class="meta">INFO</span>] com.example:myproject:jar:<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT</span><br></pre></td></tr></table></figure>

<p><code>mvn dependency:tree</code> 命令打印你的项目依赖项的树型表示。您可以看到 <code>spring-boot-starter-parent</code> 本身不提供依赖项。要添加必要的依赖项，请编辑 <code>pom.xml</code> 并将 <code>spring-boot-starter-web</code> 依赖项立即添加到 <code>parent</code> 部分下方：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你再次运行 <code>mvn dependency:tree</code>，您可以看到现在有许多额外的依赖项，包括 Tomcat web 服务器和 Spring Boot 本身。</p>
<h3 id="编写你的代码"><a href="#编写你的代码" class="headerlink" title="编写你的代码"></a>编写你的代码</h3><p>要完成我们的应用程序，我们需要创建一个 Java 文件。默认情况下，Maven 从 <code>src/main/java</code> 编译源代码，因此您需要创建该文件夹结构，然后添加一个名为 <code>src/main/java/Example.java</code> 的文件，包含以下代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    String <span class="title function_">home</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        SpringApplication.run(Example.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然这里没有多少代码，但仍有很多工作要做。我们将在接下来的几节中讨论重要的部分。</p>
<ol>
<li><p><strong>@RestController 和 @RequestMapping 注解</strong></p>
<p>在我们的示例类上的第一个注解是 <code>@RestController</code>。这被称为构造型注解。它为阅读代码的人们提供了一些提示，并且为 Spring 提供了一个特定的角色。在本例中，我们的类是一个web <code>@Controller</code>，所以 Spring 在处理传入 web 请求时考虑它。</p>
<p><code>@RequestMapping</code> 注解提供了“路由”信息。它告诉 Spring，任何带有 &#x2F; 路径的 HTTP 请求都应该映射到 home 方法。<code>@RestController</code> 注解告诉 Spring 将生成的字符串直接呈现给调用者。</p>
<blockquote>
<p><code>@RestController</code> 和 <code>@RequestMapping</code> 注解是 Spring MVC 注解。（它们不是特定于 Spring Boot 的。）有关更多详细信息，请参见 Spring 参考文档中的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.0.6.RELEASE/spring-framework-reference/web.html#mvc">MVC 部分</a>。</p>
</blockquote>
</li>
<li><p><strong>@EnableAutoConfiguration 注解</strong></p>
<p>第二个类级别注解是 <code>@EnableAutoConfiguration</code>。这个注解告诉 Spring Boot 去“猜测”您想如何配置 Spring，这基于您添加的 <code>jar</code> 依赖项。因为 <code>spring-boot-starter-web</code> 添加了 Tomcat 和 Spring MVC，所以自动配置假设您正在开发一个 web 应用程序，并相应地设置 Spring。</p>
<blockquote>
<p><strong>启动器和自动配置</strong></p>
<p>自动配置被设计成与“启动器”很好地工作，但是这两个概念并没有直接关联。您可以自由地选择除启动器之外的 <code>jar</code> 依赖项。Spring Boot 仍然尽力地自动配置您的应用程序。</p>
</blockquote>
</li>
<li><p><strong>main 方法</strong></p>
<p>我们的应用程序的最后一部分是 <code>main</code> 方法。这只是遵循应用程序入口点的 Java 约定的标准方法。通过调用 <code>run</code>，我们的 <code>main</code> 方法委托给 Spring Boot 的 <code>SpringApplication</code> 类。<code>SpringApplication</code> 引导我们的应用程序启动 Spring，而 Spring 又启动了自动配置的 Tomcat web 服务器。我们需要传递 <code>Example.class</code> 作为 <code>run</code> 方法的参数，以告诉 <code>SpringApplication</code> 它是主要的 Spring 组件。<code>args</code> 数组也被传递，以暴露任何命令行参数。</p>
</li>
</ol>
<h3 id="运行这个示例"><a href="#运行这个示例" class="headerlink" title="运行这个示例"></a>运行这个示例</h3><p>此时，您的应用程序应该可以工作了。因为您使用了 <code>spring-boot-starter-parent</code> POM，所以您有一个有用的 <code>run</code> 目标，您可以使用它来启动应用程序。 在根项目目录键入 <code>mvn spring-boot:run</code> 以启动应用程序。您应该会看到类似如下的输出：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>mvn spring-<span class="symbol">boot:</span>run</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___<span class="string">&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | &#x27;</span>_ |<span class="params"> &#x27;_</span>| |<span class="params"> &#x27;_ \/ _` </span>| \ \ \ \</span><br><span class="line"> \\/  ___)|<span class="params"> </span>|_)|<span class="params"> </span>| |<span class="params"> </span>| |<span class="params"> </span>||<span class="params"> (_</span>| |<span class="params">  ) ) ) )</span></span><br><span class="line"><span class="params">  &#x27;  </span>|____|<span class="params"> .__</span>|_|<span class="params"> </span>|_|<span class="params">_</span>| |<span class="params">_\__, </span>| / <span class="regexp">/ /</span> /</span><br><span class="line"> =========|<span class="params">_</span>|==============|<span class="params">___/=/_/_/_/</span></span><br><span class="line"><span class="params"> :: Spring Boot ::  (v2.0.2.RELEASE)</span></span><br><span class="line"><span class="params">....... . . .</span></span><br><span class="line"><span class="params">....... . . . (log output here)</span></span><br><span class="line"><span class="params">....... . . .</span></span><br><span class="line"><span class="params">........ Started Example <span class="keyword">in</span> 2.222 seconds (JVM running <span class="keyword">for</span> 6.514)</span></span><br></pre></td></tr></table></figure>

<p>如果你打开一个浏览器，访问 <code>http://localhost:8080/</code>，你应该会看见如下输出：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Hello</span> <span class="type">World</span>!</span><br></pre></td></tr></table></figure>

<p>要优雅地退出应用程序，按 <code>ctrl-c</code>。</p>
<h3 id="创建一个可执行的-jar"><a href="#创建一个可执行的-jar" class="headerlink" title="创建一个可执行的 jar"></a>创建一个可执行的 jar</h3><p>我们通过创建一个可以在生产中运行的完全自包含的可执行 <code>jar</code> 文件来完成我们的示例。可执行 <code>jar</code>（有时称为“fat jars”）是包含您的编译类的存档文件，以及您的代码需要运行所需的所有 <code>jar</code> 依赖项。</p>
<blockquote>
<p><strong>可执行的 <code>jar</code> 和 Java</strong></p>
<p>Java 没有提供加载嵌套 <code>jar</code> 文件的标准方法（<code>jar</code> 文件本身包含在一个 <code>jar</code> 中）。如果您希望分发一个自包含的应用程序，这可能会有问题。</p>
<p>为了解决这个问题，许多开发人员使用“uber”<code>jar</code>。一个 uber <code>jar</code> 将所有应用程序依赖项的所有类打包成一个归档文件。这种方法的问题在于，很难看到应用程序中有哪些库。如果在多个 <code>jar</code> 中使用相同的文件名（但使用不同的内容），也会有问题。</p>
<p>Spring Boot 采用了一种<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#executable-jar">不同的方法</a>，让您可以直接嵌套 <code>jar</code>。</p>
</blockquote>
<p>要创建一个可执行 <code>jar</code>，我们需要将 <code>spring-boot-maven-plugin</code> 添加到我们的 <code>pom.xml</code> 中。要做到这一点，请在 <code>dependencies</code> 部分下面插入以下几行：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>spring-boot-starter-parent</code> POM 包含 <code>&lt;executions&gt;</code> 配置以绑定 <code>repackage</code> 目标。如果您不使用父 POM，您需要自己声明这个配置。有关详细信息，请参见<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/maven-plugin/usage.html">插件文档</a>。</p>
</blockquote>
<p>保存你的 <code>pom.xml</code> 并在命令行运行 <code>mvn package</code>，如下所示：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ mvn package</span><br><span class="line"></span><br><span class="line">[<span class="meta">INFO</span>] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[<span class="meta">INFO</span>]</span><br><span class="line">[<span class="meta">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="meta">INFO</span>] Building myproject <span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT</span><br><span class="line">[<span class="meta">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="meta">INFO</span>] .... ..</span><br><span class="line">[<span class="meta">INFO</span>] --- maven-jar-plugin:<span class="number">2.4</span>:jar (<span class="literal">default</span>-jar) @ myproject ---</span><br><span class="line">[<span class="meta">INFO</span>] Building jar: /Users/developer/example/spring-boot-example/target/myproject<span class="number">-0.0</span><span class="number">.1</span>-SNAPSHOT.jar</span><br><span class="line">[<span class="meta">INFO</span>]</span><br><span class="line">[<span class="meta">INFO</span>] --- spring-boot-maven-plugin:<span class="number">2.0</span><span class="number">.2</span>.RELEASE:repackage (<span class="literal">default</span>) @ myproject ---</span><br><span class="line">[<span class="meta">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="meta">INFO</span>] BUILD SUCCESS</span><br><span class="line">[<span class="meta">INFO</span>] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>如果你查看 <code>target</code> 目录内部，你应该会看到 <code>myproject-0.0.1-SNAPSHOT.jar</code>，这个文件应该差不多 <code>10MB</code> 大小。如果你想偷看里面的内容，你可以使用 <code>jar tvf</code>，如下所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>jar tvf target/myproject-<span class="number">0.0</span>.<span class="number">1</span>-<span class="variable constant_">SNAPSHOT</span>.jar</span><br></pre></td></tr></table></figure>

<p>你应该也会看见一个更小的名为 <code>myproject-0.0.1-SNAPSHOT.jar.original</code> 的文件在 <code>target</code> 目录下。这是在 Spring Boot 重新打包之前，Maven 创建的初始 <code>jar</code> 文件 。</p>
<p>要运行该应用程序，使用 <code>java -jar</code> 命令，如下所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -jar target/myproject-<span class="number">0.0</span>.<span class="number">1</span>-<span class="variable constant_">SNAPSHOT</span>.jar</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___<span class="string">&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | &#x27;</span>_ |<span class="params"> &#x27;_</span>| |<span class="params"> &#x27;_ \/ _` </span>| \ \ \ \</span><br><span class="line"> \\/  ___)|<span class="params"> </span>|_)|<span class="params"> </span>| |<span class="params"> </span>| |<span class="params"> </span>||<span class="params"> (_</span>| |<span class="params">  ) ) ) )</span></span><br><span class="line"><span class="params">  &#x27;  </span>|____|<span class="params"> .__</span>|_|<span class="params"> </span>|_|<span class="params">_</span>| |<span class="params">_\__, </span>| / <span class="regexp">/ /</span> /</span><br><span class="line"> =========|<span class="params">_</span>|==============|<span class="params">___/=/_/_/_/</span></span><br><span class="line"><span class="params"> :: Spring Boot ::  (v2.0.2.RELEASE)</span></span><br><span class="line"><span class="params">....... . . .</span></span><br><span class="line"><span class="params">....... . . . (log output here)</span></span><br><span class="line"><span class="params">....... . . .</span></span><br><span class="line"><span class="params">........ Started Example <span class="keyword">in</span> 2.536 seconds (JVM running <span class="keyword">for</span> 2.864)</span></span><br></pre></td></tr></table></figure>

<p>像前面一样，要退出该应用程序，按 <code>ctrl-c</code>。</p>
<h2 id="下一步该读什么"><a href="#下一步该读什么" class="headerlink" title="下一步该读什么"></a>下一步该读什么</h2><p>希望这一节提供了一些 Spring Boot 基础知识，并帮助您编写自己的应用程序。如果您是面向任务的开发人员，您可能想跳到 <a target="_blank" rel="noopener" href="https://spring.io/">spring.io</a> 并查看一些<a target="_blank" rel="noopener" href="https://spring.io/guides/">入门指南</a>来解决具体的“我如何用 Spring 实现它？”问题。我们还有 Spring Boot 特有的“<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#howto">如何做</a>”参考文档。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot">Spring Boot 存储库</a>也有一些您可以运行的<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-samples">示例</a>。这些示例与代码的其余部分无关（也就是说，您不需要构建其余的代码来运行或使用示例）。</p>
<p>否则，下一个逻辑步骤是阅读 *<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot">第三部分：“使用 Spring Boot”</a>*。如果你真的很不耐烦，你也可以跳过，读一下 *<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features">Spring Boot 特性</a>*。</p>
<h1 id="使用-Spring-Boot"><a href="#使用-Spring-Boot" class="headerlink" title="使用 Spring Boot"></a>使用 Spring Boot</h1><p>本节将详细讨论如何使用 Spring Boot。它涵盖了诸如构建系统、自动配置以及如何运行应用程序等主题。我们还介绍了一些 Spring Boot 最佳实践。尽管 Spring Boot 没有什么特别之处（它只是您可以使用的另一个库），但是有一些建议，在接下来的时候，使您的开发过程更容易一些。</p>
<p>如果您开始使用 Spring Boot，那么您应该在深入这一节之前阅读*<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#getting-started">入门</a>*指南。</p>
<h2 id="构建系统"><a href="#构建系统" class="headerlink" title="构建系统"></a>构建系统</h2><p>强烈建议您选择一个支持<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-dependency-management"><em>依赖管理</em></a>的构建系统，并且可以使用发布到“Maven Central”存储库的工件。我们建议您选择 Maven 或 Gradle。可以让 Spring Boot 与其他构建系统（例如 Ant）一起工作，但是它们并不是特别受支持。</p>
<h3 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h3><p>Spring Boot 的每一个版本都提供了它所支持的一个被整理的依赖项列表。实际上，在构建配置中，您不需要为这些依赖项提供一个版本，因为 Spring Boot 为您管理这些依赖项。当您升级 Spring Boot 本身时，这些依赖项也会以一致的方式升级。</p>
<blockquote>
<p>如果需要，您仍然可以指定一个版本并覆盖 Spring Boot 的建议。</p>
</blockquote>
<p>策划列表包含了 Spring Boot 可以使用的所有 spring 模块以及第三方库的改进列表。这个列表可以作为一个标准的<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-maven-without-a-parent">材料清单</a>（<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-maven-without-a-parent"><code>spring-boot-dependencies</code></a>），可以适用于 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-maven-parent-pom">Maven</a> 和 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-gradle">Gradle</a>。</p>
<blockquote>
<p>Spring Boot 的每个版本都与 Spring 框架的一个基本版本相关联。我们<strong>强烈</strong>建议您不要指定它的版本。</p>
</blockquote>
<h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><p>Maven 用户可以从 <code>spring-boot-starter-parent</code> 项目继承来获得合理的默认值。父项目提供了以下特性：</p>
<ul>
<li>Java 1.8 作为默认编译等级</li>
<li><code>UTF-8</code> 源码编码</li>
<li>一个<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-dependency-management">依赖管理部分</a>，继承自 <code>spring-boot-dependencies</code> pom，管理通用依赖项的版本。这个依赖管理允许你在自己的 pom 中使用这些依赖项时省略 <code>&lt;version&gt;</code> 标签</li>
<li>明智的<a target="_blank" rel="noopener" href="https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html">资源过滤</a></li>
<li>明智的插件配置（<a target="_blank" rel="noopener" href="http://www.mojohaus.org/exec-maven-plugin/">exec plugin</a>、<a target="_blank" rel="noopener" href="https://github.com/ktoso/maven-git-commit-id-plugin">Git commit ID</a> 和 <a target="_blank" rel="noopener" href="https://maven.apache.org/plugins/maven-shade-plugin/">shade</a>）</li>
<li>明智的用于 <code>application.properties</code> 和 <code>application.yml</code> 的包含特定 profile 文件的资源过滤（比如：<code>application-dev.properties</code> 和 <code>application-dev.yml</code>）</li>
</ul>
<p>注意，由于 <code>application.properties</code> 和 <code>application.yml</code> 文件接受 Spring 风格的占位符 <code>$&#123;…&#125;</code>，Maven 过滤被更改为使用 <code>@..@</code> 占位符。（你可以通过设置一个名为 <code>resource.delimiter</code> 的 Maven 属性来覆盖它。）</p>
<ol>
<li><p><strong>继承父启动器</strong></p>
<p>要配置你的项目继承自 <code>spring-boot-starter-parent</code>，设置 <code>parent</code> 如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>您应该仅在此依赖项上指定 Spring Boot 版本号。如果您导入额外的启动器，您可以安全地省略版本号。</p>
</blockquote>
<p>通过这种设置，您还可以通过在自己的项目中覆盖一个属性来覆盖单个依赖项。例如，要升级到另一个 Spring Data release train，您需要将以下内容添加到您的 <code>pom.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring-data-releasetrain.version</span>&gt;</span>Fowler-SR2<span class="tag">&lt;/<span class="name">spring-data-releasetrain.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>检查 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-dependencies/pom.xml"><code>spring-boot-dependencies</code> pom</a> 获取支持的属性列表。</p>
</blockquote>
</li>
<li><p><strong>使用没有父 POM 的 Spring Boot</strong></p>
<p>不是每个人都喜欢继承自 <code>spring-boot-starter-parent</code> POM。您可能有您自己的企业标准父类，您需要使用它们，或者您可能倾向于显式地声明所有的 Maven 配置。</p>
<p>如果你不想使用 <code>spring-boot-starter-parent</code>，您仍然可以使用 <code>scope=import</code> 依赖项来保持依赖管理（但不是插件管理）的好处：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Import dependency management from Spring Boot --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>前面的示例设置不允许您使用属性来覆盖单个依赖项，如上所述。要实现相同的结果，您需要在 <code>spring-boot-dependencies</code> 条目<strong>之前</strong>在您的项目的依赖项管理中添加一个条目。例如，要升级到另一个 Spring Data release train，您可以将以下元素添加到您的 <code>pom.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Override Spring Data release train provided by Spring Boot --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-releasetrain<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>Fowler-SR2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>在前面的示例中，我们指定了一个 BOM，但是任何依赖类型都可以以相同的方式被覆盖。</p>
</blockquote>
</li>
<li><p><strong>使用 Spring Boot Maven 插件</strong></p>
<p>Spring Boot 包含了一个 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#build-tool-plugins-maven-plugin">Maven 插件</a>可以将项目打包成一个可执行的 <code>jar</code>。如果你想使用它，添加该插件到你的 <code>&lt;plugins&gt;</code> 部分，如下示例所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果你使用 Spring Boot 启动器父 pom，你只需要添加该插件。没有其它需要配置的东西，除非你想修改父 pom 中定义的设置。</p>
</blockquote>
</li>
</ol>
<h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><p>要了解搭配 Gradle 来使用 Spring Boot，请参考 Spring Boot 的 Gradle 插件文档：</p>
<ul>
<li>参考手册（<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/gradle-plugin/reference/html">HTML</a> 和 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/gradle-plugin/reference/pdf/spring-boot-gradle-plugin-reference.pdf">PDF</a>）</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/gradle-plugin/api">API</a></li>
</ul>
<h3 id="启动器"><a href="#启动器" class="headerlink" title="启动器"></a>启动器</h3><p>启动器是一组方便的依赖关系描述符，您可以在应用程序中包括这些描述符。您可以获取为所有 Spring 和相关技术提供一站式服务，而无需通过示例代码和复制粘贴的依赖描述符来进行搜索。例如，如果您想要开始使用 Spring 和 JPA 进行数据库访问，请在项目中包含 <code>spring-boot-starter-data-jpa</code> 依赖项。</p>
<p>启动器包含大量的依赖项，您需要通过一个一致的、受支持的管理传递依赖集来快速地启动项目并运行。</p>
<blockquote>
<p><strong>名字里包含了什么</strong></p>
<p>所有官方的启动器都遵循类似的命名模式：<code>spring-boot-starter-*</code>，其中 <code>*</code> 是一种特殊类型的应用程序。这种命名结构旨在帮助您找到启动器。许多 IDE 中的 Maven 集成让您可以通过名称搜索依赖项。例如，如果安装了适当的 Eclipse 或 STS 插件，您可以在 POM 编辑器中按下 <code>ctrl-space</code>，并在一个完整的列表中键入“<code>spring-boot-starter</code>”。</p>
<p>正如在“创建你自己的启动器”部分中所解释的，第三方启动器不应该从 <code>spring-boot</code> 开始，因为它是为官方 Spring Boot 工件预留的。相反，第三方启动器通常以项目的名称开始。例如，一个名为 <code>thirdpartyproject</code> 的第三方启动项目通常会被命名为 <code>thirdpartyproject-spring-boot-starter</code>。</p>
</blockquote>
<p>下面列举的应用程序启动器，由 Spring Boot 提供，位于 <code>org.springframework.boot</code> <code>group</code> 下：</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">描述</th>
<th align="left">Pom</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>spring-boot-starter</code></td>
<td align="left">核心启动器，保留自动配置支持、日志和 YAML</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-activemq</code></td>
<td align="left">用于使用 Apache ActiveMQ 进行 JMS 消息传递</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-activemq/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-amqp</code></td>
<td align="left">用于使用 Spring AMQP 和 Rabbit MQ</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-amqp/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-aop</code></td>
<td align="left">用于使用 Spring AOP 和 AspectJ 进行面向切面编程</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-aop/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-artemis</code></td>
<td align="left">用于使用 Apache Artemis 进行 JMS 消息传递</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-artemis/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-batch</code></td>
<td align="left">用于使用 Spring Batch</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-batch/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-cache</code></td>
<td align="left">用于使用 Spring Framework 的缓存支持</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-cache/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-cloud-connectors</code></td>
<td align="left">用于使用 Spring Cloud Connectors，它简化了与云平台里的服务的连接，如 Cloud Foundry 和 Heroku</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-cloud-connectors/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-cassandra</code></td>
<td align="left">用于使用 Cassandra 分布式数据库和 Spring Data Cassandra</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-cassandra/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-cassandra-reactive</code></td>
<td align="left">用于使用 Cassandra 分布式数据库和 Spring Data Cassandra Reactive</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-cassandra-reactive/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-couchbase</code></td>
<td align="left">用于使用 Couchbase 面向文档型数据库和 Spring Data Couchbase</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-couchbase/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-couchbase-reactive</code></td>
<td align="left">用于使用 Couchbase 面向文档型数据库和 Spring Data Couchbase Reactive</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-couchbase-reactive/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-elasticsearch</code></td>
<td align="left">用于使用 Elasticsearch 搜索分析引擎和 Spring Data Elasticsearch</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-elasticsearch/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-jpa</code></td>
<td align="left">用于使用基于 Hibernate 的 Spring Data JPA</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-jpa/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-ldap</code></td>
<td align="left">用于使用 Spring Data LDAP</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-ldap/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-mongodb</code></td>
<td align="left">用于使用 MongoDB 面向文档型数据库和 Spring Data MongoDB</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-mongodb/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-mongodb-reactive</code></td>
<td align="left">用于使用 MongoDB 面向文档型数据库和 Spring Data MongoDB Reactive</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-mongodb-reactive/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-neo4j</code></td>
<td align="left">用于使用 Neo4j 图形数据库和 Spring Data Neo4j</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-neo4j/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-redis</code></td>
<td align="left">用于使用 Redis 键值对数据存储，以及 Spring Data Redis 和 Lettuce 客户端</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-redis/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-redis-reactive</code></td>
<td align="left">用于使用 Redis 键值对数据存储，以及 Spring Data Redis reactive 和 Lettuce 客户端</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-redis-reactive/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-rest</code></td>
<td align="left">用于使用 Spring Data Rest 通过 REST 暴露 Spring Data 仓库</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-rest/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-data-solr</code></td>
<td align="left">用于使用 Apache Solr 搜索平台以及 Spring Data Solr</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-data-solr/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-freemarker</code></td>
<td align="left">用于使用 FreeMarker 视图构建 MVC web 应用程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-freemarker/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-groovy-templates</code></td>
<td align="left">用于使用 Groovy Templates 视图构建 MVC web 应用程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-groovy-templates/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-hateoas</code></td>
<td align="left">用于构建基于超媒体的 RESTful web 应用程序，使用 Spring MVC 和 Spring HATEOAS</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-hateoas/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-integration</code></td>
<td align="left">用于使用 Spring Integration</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-integration/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jdbc</code></td>
<td align="left">用于使用 JDBC 以及 HikariCP 连接池</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jdbc/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jersey</code></td>
<td align="left">用于构建 RESTful web 应用程序，使用 JAX-RS 和 Jersey。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-web"><code>spring-boot-starter-web</code></a> 的另一种选择。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jersey/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jooq</code></td>
<td align="left">用于使用 jOOQ 访问 SQL 数据库。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-data-jpa"><code>spring-boot-starter-data-jpa</code></a> 或 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-jdbc"><code>spring-boot-starter-jdbc</code></a> 的另一种选择。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jooq/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-json</code></td>
<td align="left">用于读写 json</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-json/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jta-atomikos</code></td>
<td align="left">用于使用 Atomikos JTA 事务</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jta-atomikos/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jta-bitronix</code></td>
<td align="left">用于使用 Bitronix JTA 事务</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jta-bitronix/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-jta-narayana</code></td>
<td align="left">用于使用 Narayana JTA 事务</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jta-narayana/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-mail</code></td>
<td align="left">用于使用 Java Mail 和 Spring Framework 的 email 发送支持</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-mail/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-mustache</code></td>
<td align="left">用于使用 Mustache 视图构建 web 应用程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-mustache/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-quartz</code></td>
<td align="left">用于使用 Quartz 调度程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-quartz/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-security</code></td>
<td align="left">用于使用 Spring Security</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-security/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-test</code></td>
<td align="left">用于测试 Spring Boot 应用程序，包括 JUnit、Hamcrest 和 Mockito 库</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-test/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-thymeleaf</code></td>
<td align="left">用于使用 Thymeleaf 视图构建 MVC web 应用程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-thymeleaf/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-validation</code></td>
<td align="left">用于使用基于 Hibernate Validator 的 Java Bean 校验程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-validation/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-web</code></td>
<td align="left">用于构建 web，包括 RESTful 和使用 Spring MVC 的应用程序。使用 Tomcat 作为默认内置容器</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-web/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-web-services</code></td>
<td align="left">用于使用 Spring Web Services</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-web-services/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-webflux</code></td>
<td align="left">用于构建 WebFlux 应用程序，使用 Spring Framework 的 Reactive Web 支持</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-webflux/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-websocket</code></td>
<td align="left">用于构建 WebSocket 应用程序，使用 Spring Framework 的 WebSocket 支持</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-websocket/pom.xml">Pom</a></td>
</tr>
</tbody></table>
<p>除了应用程序启动器之外，下面的启动器还可以用于添加*<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#production-ready">生产就绪</a>*特性：</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">描述</th>
<th align="left">Pom</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>spring-boot-starter-actuator</code></td>
<td align="left">用于使用 Spring Boot 的 Actuator 提供生产就绪特性，帮助您监视和管理应用程序</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-actuator/pom.xml">Pom</a></td>
</tr>
</tbody></table>
<p>最后，Spring Boot 还包括以下启动器，如果您想要排除或交换特定的技术方面，可以使用：</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">描述</th>
<th align="left">Pom</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>spring-boot-starter-jetty</code></td>
<td align="left">用于使用 Jetty 作为内置 servlet 容器。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-tomcat"><code>spring-boot-starter-tomcat</code></a> 的另一种选择。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-jetty/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-log4j2</code></td>
<td align="left">用于使用 Log4j2 记录日志。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-logging"><code>spring-boot-starter-logging</code></a> 的另一种选择。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-log4j2/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-logging</code></td>
<td align="left">用于logging 使用 Logback. Default logging starter</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-logging/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-reactor-netty</code></td>
<td align="left">用于使用 Reactor Netty 作为内置响应式 HTTP 服务器。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-reactor-netty/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-tomcat</code></td>
<td align="left">用于使用 Tomcat 作为内置 servlet 容器。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-web"><code>spring-boot-starter-web</code></a> 使用的默认 servlet 容器启动器。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-tomcat/pom.xml">Pom</a></td>
</tr>
<tr>
<td align="left"><code>spring-boot-starter-undertow</code></td>
<td align="left">用于使用 Undertow 作为内置 servlet 容器。<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#spring-boot-starter-tomcat"><code>spring-boot-starter-tomcat</code></a> 的另一种选择。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-starters/spring-boot-starter-undertow/pom.xml">Pom</a></td>
</tr>
</tbody></table>
<blockquote>
<p>有关附加社区贡献的启动器列表，请参阅 Github 上的 <code>spring-boot-starters</code> 模块中的<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-starters/README.adoc">自述文件</a>。</p>
</blockquote>
<h2 id="组织你的代码"><a href="#组织你的代码" class="headerlink" title="组织你的代码"></a>组织你的代码</h2><p>Spring Boot 不需要任何特定的代码布局来工作。然而，有一些最佳实践可以提供帮助。</p>
<h3 id="使用“default”包"><a href="#使用“default”包" class="headerlink" title="使用“default”包"></a>使用“default”包</h3><p>当一个类不包含包声明时，它被认为是在“default 包”中。使用“default 包”通常是不鼓励的，应该避免使用。它可能会导致使用 <code>@ComponentScan</code>、<code>@EntityScan</code> 或 <code>@SpringBootApplication</code> 注解的 Spring Boot 应用程序的特定问题，因为每个 <code>jar</code> 的每个类都被读取。</p>
<blockquote>
<p>我们建议您遵循 Java 推荐的包命名约定，并使用一个反向的域名（例如，<code>com.example.project</code>）。</p>
</blockquote>
<h3 id="定位主应用程序类"><a href="#定位主应用程序类" class="headerlink" title="定位主应用程序类"></a>定位主应用程序类</h3><p>我们通常建议您在其他类之上的根包中定位主应用程序类。<code>@SpringBootApplication</code> 注解通常放在主类上，它隐式地为某些项定义了一个基本的“搜索包”。例如，如果您正在编写一个 JPA 应用程序，则使用 <code>@SpringBootApplication</code> 注解类的包来搜索 <code>@Entity</code> 项。使用根包也允许组件扫描只应用于您的项目。</p>
<blockquote>
<p>如果您不想使用 <code>@SpringBootApplication</code>，那么 <code>@EnableAutoConfiguration</code> 和 <code>@ComponentScan</code> 注解将定义该行为，因此您也可以使用它。</p>
</blockquote>
<p>下面的清单展示了一个典型的布局：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">com</span><br><span class="line"> +- example</span><br><span class="line">     +- myapplication</span><br><span class="line">         +- Application.java</span><br><span class="line">         |<span class="params"></span></span><br><span class="line"><span class="params">         +- customer</span></span><br><span class="line"><span class="params">         </span>|   +- Customer.java</span><br><span class="line">         |<span class="params">   +- CustomerController.java</span></span><br><span class="line"><span class="params">         </span>|   +- CustomerService.java</span><br><span class="line">         |<span class="params">   +- CustomerRepository.java</span></span><br><span class="line"><span class="params">         </span>|</span><br><span class="line">         +- order</span><br><span class="line">             +- Order.java</span><br><span class="line">             +- OrderController.java</span><br><span class="line">             +- OrderService.java</span><br><span class="line">             +- OrderRepository.java</span><br></pre></td></tr></table></figure>

<p><code>Application.java</code> 文件会声明 <code>main</code> 方法，以及基础的 <code>@SpringBootApplication</code>，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h2><p>Spring Boot 支持基于 Java 的配置。虽然可以使用 XML 源码的 <code>SpringApplication</code>，但是我们通常建议您的主源是一个 <code>@Configuration</code> 类。通常，定义主方法的类是一个很好的候选者，作为主要的 <code>@Configuration</code>。</p>
<blockquote>
<p>许多 Spring 配置示例已经在 Internet 上发布，它们使用 XML 配置。如果可能，始终尝试使用等效的基于 Java 的配置。搜索 <code>Enable*</code> 注解可能是一个很好的起点。</p>
</blockquote>
<h3 id="导入附加的配置类"><a href="#导入附加的配置类" class="headerlink" title="导入附加的配置类"></a>导入附加的配置类</h3><p>你不需要把你所有的 <code>@Configuration</code> 放入单一的类中。<code>@Import</code> 注解可用来导入附加的配置类。替代地，你可以使用 <code>@ComponentScan</code> 自动拾取所有的 Spring 组件，包括 <code>@Configuration</code> 类。</p>
<h3 id="导入-XML-配置"><a href="#导入-XML-配置" class="headerlink" title="导入 XML 配置"></a>导入 XML 配置</h3><p>如果你必须使用基于 XML 的配置，我们推荐你仍然从 <code>@Configuration</code> 类开始。你可以使用 <code>@ImportResource</code> 注解加载 XML 配置文件。</p>
<h2 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h2><p>Spring Boot 自动配置尝试根据您添加的 jar 依赖项自动配置 Spring 应用程序。例如，如果 <code>HSQLDB</code> 在您的类路径上，并且您没有手动配置任何数据库连接 bean，那么 Spring Boot 将自动配置内存数据库。</p>
<p>通过将 <code>@EnableAutoConfiguration</code> 或 <code>@SpringBootApplication</code> 注解添加到您的一个 <code>@Configuration</code> 类中，您需要选择加入到自动配置（原文：You need to opt-in to auto-configuration）。</p>
<blockquote>
<p>您应该只添加一个 <code>@SpringBootApplication</code> 或 <code>@EnableAutoConfiguration</code> 注解。我们通常建议只在主 <code>@Configuration</code> 类中添加其中一个。</p>
</blockquote>
<h3 id="逐步取代自动配置"><a href="#逐步取代自动配置" class="headerlink" title="逐步取代自动配置"></a>逐步取代自动配置</h3><p>自动配置是非侵入性的。在任何时候，您都可以开始定义自己的配置来替换自动配置的特定部分。例如，如果您添加了自己的 <code>DataSource</code> bean，默认的嵌入式数据库支持就会被取代。</p>
<p>如果您需要了解当前正在应用的自动配置，以及为什么。使用 <code>--debug</code> 开关启动应用程序。这样做可以为一些核心日志记录器开始调试日志，并将条件报告记录到控制台。</p>
<h3 id="禁用特定的自动配置类"><a href="#禁用特定的自动配置类" class="headerlink" title="禁用特定的自动配置类"></a>禁用特定的自动配置类</h3><p>如果你发现你不想应用的特定自动配置类，你可以使用 <code>@EnableAutoConfiguration</code> 的 <code>exclude</code> 属性禁用它们，如下示例所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import org<span class="selector-class">.springframework</span><span class="selector-class">.boot</span><span class="selector-class">.autoconfigure</span>.*;</span><br><span class="line">import org<span class="selector-class">.springframework</span><span class="selector-class">.boot</span><span class="selector-class">.autoconfigure</span><span class="selector-class">.jdbc</span>.*;</span><br><span class="line">import org<span class="selector-class">.springframework</span><span class="selector-class">.context</span><span class="selector-class">.annotation</span>.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@Configuration</span></span><br><span class="line">@EnableAutoConfiguration(exclude=&#123;DataSourceAutoConfiguration<span class="selector-class">.class</span>&#125;)</span><br><span class="line">public class MyConfiguration &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果那个类不在类路径，你可以使用这个注解的 <code>excludeName</code> 属性，指定完整的全类名。最后，您还可以通过使用 <code>spring.autoconfigure.exclude</code> property 来控制需要排除的自动配置类的列表。</p>
<blockquote>
<p>你可以同时使用注解级别和 property 定义排除项。</p>
</blockquote>
<h2 id="Spring-Bean-和依赖注入"><a href="#Spring-Bean-和依赖注入" class="headerlink" title="Spring Bean 和依赖注入"></a>Spring Bean 和依赖注入</h2><p>您可以自由使用任何标准 Spring 框架技术来定义 bean 及其注入的依赖项。为了简单起见，我们经常发现使用 <code>@ComponentScan</code>（找到您的 bean）和使用 <code>@Autowired</code>（进行构造函数注入）工作得很好。</p>
<p>如果按照上面建议的方式构造代码（在根包中定位应用程序类），可以不带任何参数添加 <code>@ComponentScan</code>。所有应用程序组件（<code>@Component</code>、<code>@Service</code>、<code>@Repository</code>、<code>@Controller</code> 等）都自动注册为 Spring bean。</p>
<p>下面的示例显示了使用构造函数注入来获得所需的 <code>RiskAssessor</code> Bean 的 <code>@Service</code> Bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseAccountService</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RiskAssessor riskAssessor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DatabaseAccountService</span><span class="params">(RiskAssessor riskAssessor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.riskAssessor = riskAssessor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果一个 Bean 只有一个构造函数，你可以省略 <code>@Autowired</code>，如下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseAccountService</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RiskAssessor riskAssessor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DatabaseAccountService</span><span class="params">(RiskAssessor riskAssessor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.riskAssessor = riskAssessor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意，使用构造函数注入时，可以将 <code>riskAssessor</code> 字段标记为 <code>final</code>，表示它不能在之后被修改。</p>
</blockquote>
<h2 id="使用-SpringBootApplication-注解"><a href="#使用-SpringBootApplication-注解" class="headerlink" title="使用 @SpringBootApplication 注解"></a>使用 @SpringBootApplication 注解</h2><p>许多 Spring Boot 开发者喜欢在他们的应用中使用自动配置、组件扫描，并且能够在他们的“application class”上定义额外配置。单个 <code>@SpringBootApplication</code> 注解即可以用来开启上述三个特性，即：</p>
<ul>
<li><code>@EnableAutoConfiguration</code>：开启 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-auto-configuration">Spring Boot 的自动配置机制</a></li>
<li><code>@ComponentScan</code>：在应用程序的包上开启 <code>@Component</code> 扫描（查看<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-structuring-your-code">最佳实践</a>）</li>
<li><code>@Configuration</code>：允许在上下文注册额外的 bean，或者导入额外的配置类</li>
</ul>
<p><code>@SpringBootApplication</code> 相当于使用默认属性的 <code>@Configuration</code>、<code>@EnableAutoConfiguration</code> 和 <code>@ComponentScan</code>，如下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span> <span class="comment">// same as @Configuration @EnableAutoConfiguration @ComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>@SpringBootApplication</code> 也提供了别名去定制 <code>@EnableAutoConfiguration</code> 和 <code>@ComponentScan</code> 的属性。</p>
</blockquote>
<blockquote>
<p>这些特性都不是强制性的，您可以选择用它支持的任何特性来替换这个注解。例如，您可能不想在应用程序中使用组件扫描：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.ComponentScan</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Import;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@Import(&#123; MyConfig.class, MyAnotherConfig.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">          SpringApplication.run(Application.<span class="keyword">class</span>, args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在本例中，应用程序和其他 Spring Boot 应用程序一样，只是没有自动检测到 <code>@Component</code> 注解的类，而用户定义的 bean 是显式导入的（参见 <code>@Import</code>）。</p>
</blockquote>
<h2 id="运行你的应用程序"><a href="#运行你的应用程序" class="headerlink" title="运行你的应用程序"></a>运行你的应用程序</h2><p>将您的应用程序打包为 jar 并使用嵌入式 HTTP 服务器的最大优点之一是，您可以像对待其他应用程序一样运行应用程序。调试 Spring Boot 应用程序也很简单。您不需要任何特殊的 IDE 插件或扩展。</p>
<blockquote>
<p>本节只讨论基于 jar 的打包。如果您选择将应用程序打包为 war 文件，则应该参考服务器和 IDE 文档。</p>
</blockquote>
<h3 id="从-IDE-运行"><a href="#从-IDE-运行" class="headerlink" title="从 IDE 运行"></a>从 IDE 运行</h3><p>您可以从 IDE 运行 Spring Boot 应用程序，作为简单的 Java 应用程序。但是，您首先需要导入您的项目。导入步骤取决于您的 IDE 和构建系统。大多数 IDE 可以直接导入 Maven 项目。例如，Eclipse 用户可以选择 <code>File</code> 菜单的 <code>Import…</code> → <code>Existing Maven Projects</code>。</p>
<p>如果不能直接将项目导入到 IDE 中，那么可以使用构建插件生成 IDE 元数据。Maven 包含 <a target="_blank" rel="noopener" href="https://maven.apache.org/plugins/maven-eclipse-plugin/">Eclipse</a> 和 <a target="_blank" rel="noopener" href="https://maven.apache.org/plugins/maven-idea-plugin/">IDEA</a> 的插件。Gradle 提供<a target="_blank" rel="noopener" href="https://docs.gradle.org/4.2.1/userguide/userguide.html">各种 IDE</a> 的插件。</p>
<blockquote>
<p>如果您不小心运行了两次 web 应用程序，您会看到一个“Port already in use”错误。STS 用户可以使用 <code>Relaunch</code> 按钮而不是 <code>Run</code> 按钮来确保任何现有实例都已关闭。</p>
</blockquote>
<h3 id="作为打包应用程序运行"><a href="#作为打包应用程序运行" class="headerlink" title="作为打包应用程序运行"></a>作为打包应用程序运行</h3><p>如果您使用 Spring Boot Maven 或 Gradle 插件来创建一个可执行 jar，您可以使用 <code>java -jar</code> 运行您的应用程序，如下面的例子所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -jar target/myapplication-<span class="number">0.0</span>.<span class="number">1</span>-<span class="variable constant_">SNAPSHOT</span>.jar</span><br></pre></td></tr></table></figure>

<p>还可以运行具有远程调试支持的打包应用程序。这样做可以将调试器附加到您的打包应用程序中，如下面的示例所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ java -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,<span class="built_in">suspend</span>=n \</span><br><span class="line">       -jar target/myapplication-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>

<h3 id="使用-Maven-插件"><a href="#使用-Maven-插件" class="headerlink" title="使用 Maven 插件"></a>使用 Maven 插件</h3><p>Spring Boot Maven 插件包含一个 <code>run</code> 目标，可以用来快速编译和启动你的应用程序。应用程序以展开的方式运行，正如它们在你的 IDE 中所做的那样。下面的示例显示一个典型的 Maven 命令来运行 Spring Boot 应用程序：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>mvn spring-<span class="symbol">boot:</span>run</span><br></pre></td></tr></table></figure>

<p>您可能还希望使用 <code>MAVEN_OPTS</code> 操作系统环境变量，如下例所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> MAVEN_OPTS=-Xmx1024m</span><br></pre></td></tr></table></figure>

<h3 id="使用-Gradle-插件"><a href="#使用-Gradle-插件" class="headerlink" title="使用 Gradle 插件"></a>使用 Gradle 插件</h3><p>Spring Boot Gradle 插件还包括一个 <code>bootRun</code> 任务，它可以用来以一个展开的形式运行您的应用程序。当您应用 <code>org.springframework.boot</code> 和 java 插件时，将添加 <code>bootRun</code> 任务。如下例所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>gradle bootRun</span><br></pre></td></tr></table></figure>

<p>您可能还想使用 <code>JAVA_OPTS</code> 操作系统环境变量，如下例所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> JAVA_OPTS=-Xmx1024m</span><br></pre></td></tr></table></figure>

<h3 id="热交换"><a href="#热交换" class="headerlink" title="热交换"></a>热交换</h3><p>由于 Spring Boot 应用程序只是普通的 Java 应用程序，所以 JVM 热交换应该可以开箱即用。JVM 热交换在一定程度上限制了它可以替换的字节码。对于更完整的解决方案，可以使用 <a target="_blank" rel="noopener" href="https://zeroturnaround.com/software/jrebel/">JRebel</a>。</p>
<p><code>spring-boot-devtools</code> 模块还包括对快速应用程序重启的支持。查看本章后面的<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools"><em>开发者工具</em></a>部分和<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#howto-hotswapping">如何做热交换</a>获取详细信息。</p>
<h2 id="开发者工具"><a href="#开发者工具" class="headerlink" title="开发者工具"></a>开发者工具</h2><p>Spring Boot 包括一组额外的工具，这些工具可以使应用程序开发体验变得更加愉快。<code>spring-boot-devtools</code> 模块可以包含在任何项目中，以提供额外的开发时特性。要包含 devtools 支持，请将模块依赖项添加到您的构建中，如下所示的 Maven 和 Gradle 列表：</p>
<p><strong>Maven</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Gradle</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile(<span class="string">&quot;org.springframework.boot:spring-boot-devtools&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在运行完全打包的应用程序时，开发者工具会自动被禁用。如果您的应用程序是从 <code>java -jar</code> 启动的，或者是从一个特殊的类加载器开始的，那么它就被认为是一个“生产应用程序”。在  Maven 中将依赖项标记为 <code>optional</code> 或 在 Gradle 使用 <code>compileOnly</code> 中是一种最佳实践，它可以防止 devtools 被传递到其他使用您的项目的模块中。</p>
</blockquote>
<blockquote>
<p>默认情况下，重新打包的存档不包含 devtools。如果您想要使用<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-remote">某个远程 devtools 特性</a>，您需要禁用 <code>excludeDevtools</code> 构建属性来包含它。该属性同时支持 Maven 和 Gradle 插件。</p>
</blockquote>
<h3 id="属性默认值"><a href="#属性默认值" class="headerlink" title="属性默认值"></a>属性默认值</h3><p>Spring Boot 所支持的几个库都使用缓存来提高性能。例如，<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-template-engines">模板引擎</a>缓存已编译的模板以避免重复解析模板文件。另外，Spring MVC 可以在服务静态资源时添加 HTTP 缓存头信息。</p>
<p>虽然缓存在生产中非常有益，但在开发过程中可能会产生相反的效果，使您无法看到您在应用程序中所做的更改。出于这个原因，<code>spring-boot-devtools</code> 在默认情况下禁用了缓存选项。</p>
<p>缓存选项通常在你的 <code>application.properties</code> 文件中配置。例如，Thymeleaf 提供了 <code>spring.thymeleaf.cache</code> 属性。<code>spring-boot-devtools</code> 模块不需要手动设置这些属性，而是自动应用合理的开发时配置。</p>
<blockquote>
<p>有关 devtools 应用的属性的完整列表，请参见 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/env/DevToolsPropertyDefaultsPostProcessor.java"><code>DevToolsPropertyDefaultsPostProcessor</code></a>。</p>
</blockquote>
<h3 id="自动重启"><a href="#自动重启" class="headerlink" title="自动重启"></a>自动重启</h3><p>使用 <code>spring-boot-devtools</code> 的应用程序在类路径更改时自动重新启动。当在 IDE 中工作时，这可能是一个有用的特性，因为它为代码更改提供了非常快速的反馈循环。默认情况下，指向一个文件夹的类路径上的任何条目都会被监控以进行更改。请注意，某些资源（如静态资产和视图模板）<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-restart-exclude">不需要重新启动应用程序</a>。</p>
<blockquote>
<p><strong>触发重启</strong></p>
<p>当 DevTools 监视类路径资源时，触发重启的惟一方法是更新类路径。您导致要更新的类路径的方式取决于您使用的 IDE。在 Eclipse 中，保存修改后的文件会导致类路径被更新并触发重新启动。在 IntelliJ IDEA 中，构建项目（<code>Build -&gt; Build Project</code>）具有相同的效果。</p>
</blockquote>
<blockquote>
<p>只要启用了 forking，您就可以使用支持的构建插件（Maven 和 Gradle）来启动应用程序，因为 DevTools 需要一个独立的应用程序类加载器才能正常运行。默认情况下，Gradle 和 Maven 在类路径上检测 DevTools 时是这样做的。</p>
</blockquote>
<blockquote>
<p>当与 LiveReload 一起使用时，自动重启非常有效。详情<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-livereload">请参阅 LiveReload 一节</a>。如果您使用 JRebel，自动重新启动将被禁用，以支持动态类重载。其他 devtools 特性（如 LiveReload 和 property overrides）仍然可以使用。</p>
</blockquote>
<blockquote>
<p>DevTools 依赖于应用程序上下文的关闭钩子在重新启动时关闭它。如果您已经禁用了关闭钩子（<code>SpringApplication.setRegisterShutdownHook(false)</code>），那么它将无法正常工作。</p>
</blockquote>
<blockquote>
<p>当决定是否在类路径上的条目发生更改时触发重新启动时，DevTools 会自动忽略名为 <code>spring-boot</code>、<code>spring-boot-devtools</code>、<code>spring-boot-autoconfigure</code>、<code>spring-boot-actuator</code> 和 <code>spring-boot-starter</code> 的项目。</p>
</blockquote>
<blockquote>
<p>DevTools 需要自定义 <code>ApplicationContext</code> 所使用的 <code>ResourceLoader</code>。如果您的应用程序已经提供了一个，那么它将被打包。不支持在 <code>ApplicationContext</code> 上直接覆盖 <code>getResource</code> 方法。</p>
</blockquote>
<blockquote>
<p><strong>重启和重新加载</strong></p>
<p>Spring Boot 提供的重启技术使用两个类加载器。不改变的类（例如，来自第三方 jar 的类）被加载到一个基类加载器中。正在积极开发的类被加载到重启类加载器中。当应用程序重新启动时，重启类加载器将被丢弃，并创建一个新的类加载器。这种方法意味着应用程序重新启动通常要比“冷启动”快得多，因为基类加载器已经可用并填充了。</p>
</blockquote>
<p>如果您发现重新启动对应用程序不够快，或者遇到了类加载问题，那么您可以考虑重新加载技术，例如从 ZeroTurnaround 转向 <a target="_blank" rel="noopener" href="https://zeroturnaround.com/software/jrebel/">JRebel</a>。这些工作通过重写类，使它们更适合重载。</p>
<ol>
<li><p><strong>记录状态评估的变化（Logging changes in condition evaluation）</strong></p>
<p>默认情况下，每次应用程序重新启动时，都会记录显示状态评估增量的报告。报告显示了在进行更改（如添加或删除 bean 和设置配置属性）时对应用程序的自动配置的更改。</p>
<p>若要禁用报告的日志记录，请设置以下属性：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.devtools.restart.log-condition-evaluation-delta=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>排除资源</strong></p>
<p>某些资源在更改时不一定需要触发重新启动。例如，Thymeleaf 模板可以就地编辑。默认情况下，<code>/META-INF/maven</code>、<code>/META-INF/resources</code>、<code>/resources</code>、<code>/static</code>、<code>/public</code> 或 <code>/templates</code> 不会触发重新启动，而是触发 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-livereload">live reload</a>。如果你想要自定义这些排除项，你可以使用 <code>spring.devtools.restart.exclude</code> 属性。例如，只排除 <code>/static</code> 和 <code>/public</code> 可以这样设置：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.devtools.restart.exclude=<span class="keyword">static</span><span class="comment"><span class="language-markdown">/<span class="strong">**,public/**</span></span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果你想要保留默认设置并添加额外的排除项，使用 <code>spring.devtools.restart.additional-exclude</code> 替代它。</p>
</blockquote>
</li>
<li><p><strong>观察附加路径</strong></p>
<p>你可能希望当你对不在类路径上的文件进行更改时，重新启动或加载你的应用程序。要这样，使用 <code>spring.devtools.restart.additional-paths</code> 属性配置要观察变化的附加路径。您可以使用上面提到的 <code>spring.devtools.restart.exclude</code> 属性来控制在附加路径下的更改是否会触发完全重启或 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-livereload">live reload</a>。</p>
</li>
<li><p><strong>禁用重启</strong></p>
<p>如果您不想使用重启功能，您可以使用 <code>spring.devtools.restart.enabled</code> 属性禁用它。在大多数情况下，您可以在 <code>application.properties</code> 中设置此属性（这样做仍然初始化重启类加载器，但它不观察文件的更改）。</p>
<p>如果您需要<strong>完全</strong>禁用重新启动支持（例如，因为它不能与特定的库一起工作），那么您需要设置 <code>spring.devtools.restart.enabled</code> 系统属性为 <code>false</code>，然后调用 <code>SpringApplication.run(…)</code>，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.setProperty(<span class="string">&quot;spring.devtools.restart.enabled&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">    SpringApplication.run(MyApp.class, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用一个触发文件</strong></p>
<p>如果您使用一个持续编译已更改文件的 IDE，您可能只需要在特定的时间触发重新启动。为此，您可以使用一个“触发文件”，它是一个特殊的文件，当您想要实际触发重新启动检查时，必须对其进行修改。更改文件只会触发检查，只有当 Devtools 检测到它必须做某事时才会重新启动。触发器文件可以手动更新，也可以使用 IDE 插件进行更新。</p>
<p>要使用一个触发器文件，请将 <code>spring.devtools.restart.trigger-file</code> 属性设置为触发器文件的路径。</p>
<blockquote>
<p>您可能想要设置 <code>spring.devtools.restart.trigger-file</code> 作为<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-globalsettings">全局设置</a>，以便所有的项目都以相同的方式运行。</p>
</blockquote>
</li>
<li><p><strong>自定义重启类加载器</strong></p>
<p>如前所述，在“<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-spring-boot-restart-vs-reload">重启和重新加载</a>”部分中，重新启动功能是通过使用两个类加载器实现的。对于大多数应用程序来说，这种方法运行良好。然而，它有时会导致类加载问题。</p>
<p>默认情况下，IDE 中的任何开放项目都包含“重启”类加载器，任何常规的 <code>.jar</code> 文件都装载了“基础”类加载器。如果您在一个多模块项目中工作，而不是每个模块都导入到您的 IDE 中，您可能需要定制一些东西。为此，您可以创建一个 <code>META-INF/spring-devtools.properties</code> 文件。</p>
<p><code>spring-devtools.properties</code> 文件可以包含以 <code>restart.exclude</code> 和 <code>restart.include</code> 为前缀的属性。<code>include</code> 元素是应该被拉到“重启”类加载器中的项，而 <code>exclude</code> 元素则是应该被推入“基础”类加载器的项。属性的值是应用于类路径的正则表达式模式，如下例所示：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">restart.exclude.companycommonlibs=/mycorp-common-[\\w-]+\.jar</span><br><span class="line">restart.<span class="keyword">include</span>.projectcommon=/mycorp-myproj-[\\w-]+\.jar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>所有属性的键必须是唯一的。只有属性以 <code>restart.include.</code> 或 <code>restart.exclude.</code> 开头，它才会被考虑。</p>
</blockquote>
<blockquote>
<p>所有类路径的 <code>META-INF/spring-devtools.properties</code> 都会被加载。您可以在项目中或项目使用的库中打包文件。</p>
</blockquote>
</li>
<li><p>已知局限性</p>
<p>通过使用标准 <code>ObjectInputStream</code> 来反序列化的对象，重新启动功能不会很好地工作。如果需要反序列化数据，可能需要使用 Spring 的 <code>ConfigurableObjectInputStream</code> 和 <code>Thread.currentThread().getcontextclassloader()</code>。</p>
<p>不幸的是，一些第三方库在不考虑上下文类加载器的情况下反序列化。如果您发现这样的问题，您需要向原始作者请求修复。</p>
</li>
</ol>
<h3 id="LiveReload"><a href="#LiveReload" class="headerlink" title="LiveReload"></a>LiveReload</h3><p><code>spring-boot-devtools</code> 模块包含一个嵌入式的 LiveReload 服务器，当资源被更改时，它可以用来触发浏览器刷新。LiveReload 浏览器扩展可以从 <a target="_blank" rel="noopener" href="https://livereload.com/extensions/">livereload.com</a> 免费提供给 Chrome、Firefox 和 Safari。</p>
<p>如果您不想在应用程序运行时启动 LiveReload 服务器，则可以设置 <code>spring.devtools.livereload.enabled</code> 属性为 <code>false</code>。</p>
<blockquote>
<p>您一次只能运行一个 LiveReload 服务器。在启动应用程序之前，确保没有其他的 LiveReload 服务器在运行。如果您在 IDE 中启动多个应用程序，那么只有第一个应用程序得到了 LiveReload 的支持。</p>
</blockquote>
<h3 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h3><p>您可以通过添加名为 <code>.spring-boot-devtools.properties</code> 的文件到 <code>$HOME</code> 文件夹（注意文件名以“.”开头）来配置全局 devtools 设置。添加到该文件的任何属性都适用于使用 devtools 的机器上的所有 Spring Boot 应用程序。例如，要配置重新启动以始终使用<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-restart-triggerfile">触发器文件</a>，您需要添加以下属性：</p>
<p><strong>~&#x2F;.spring-boot-devtools.properties.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.devtools.reload.trigger-file=.reloadtrigger</span><br></pre></td></tr></table></figure>

<h3 id="远程应用程序"><a href="#远程应用程序" class="headerlink" title="远程应用程序"></a>远程应用程序</h3><p>Spring Boot 开发者工具并不局限于本地开发。在远程运行应用程序时，还可以使用几个特性。远程支持是可选的。要启用它，您需要确保将 devtools 包含在重新打包的归档文件中，如下面的清单所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludeDevtools</span>&gt;</span>false<span class="tag">&lt;/<span class="name">excludeDevtools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后，你需要设置 <code>spring.devtools.remote.secret</code> 属性，如下示例所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.devtools.remote.secret=mysecret</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在远程应用程序上启用 <code>spring-boot-devtools</code> 是一种安全风险。您不应该在生产部署上启用支持。</p>
</blockquote>
<p>远程 devtools 支持分两部分提供：一个服务器端端点接受连接，一个客户端应用程序在 IDE 中运行。当 <code>spring.devtools.remote.remote.secret</code> 属性被设置时，服务器组件自动启用。客户端组件必须手动启动。</p>
<ol>
<li><p>运行远程客户端应用程序</p>
<p>远程客户端应用程序被设计为从 IDE 中运行。你需要运行 <code>org.springframework.boot.devtools.RemoteSpringApplication</code>，使用你链接的远程项目相同的类路径。应用程序的唯一必需参数是它连接的远程 URL。</p>
<p>例如，如果您正在使用 Eclipse 或 STS，并且您有一个名为 <code>my-app</code> 的项目，您已经部署到 Cloud Foundry，那么您将执行以下操作：</p>
<ul>
<li>选择 <code>Run</code> 菜单的 <code>Run Configurations…</code></li>
<li>创建一个新的 <code>Java Application</code> “launch configuration”</li>
<li>浏览 <code>my-app</code> 项目</li>
<li>使用 <code>org.springframework.boot.devtools.RemoteSpringApplication</code> 作为主类</li>
<li>添加 <code>https://myapp.cfapps.io</code> 到 <code>Program arguments</code>（或者你的任何远程 URL）</li>
</ul>
<p>运行中的远程客户端可能类似于如下列表：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  .   ____          _                                              __ _ _</span><br><span class="line"> /\\ / ___<span class="string">&#x27;_ __ _ _(_)_ __  __ _          ___               _      \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | &#x27;</span>_ |<span class="params"> &#x27;_</span>| |<span class="params"> &#x27;_ \/ _` </span>|        |<span class="params"> _ \___ _ __  ___</span>| |<span class="params">_ ___ \ \ \ \</span></span><br><span class="line"><span class="params"> \\/  ___)</span>| |<span class="params">_)</span>| |<span class="params"> </span>| |<span class="params"> </span>| |<span class="params"></span>| (_|<span class="params"> []::::::[]   / -_) &#x27;  \/ _ \  _/ -_) ) ) ) )</span></span><br><span class="line"><span class="params">  &#x27;  </span>|____|<span class="params"> .__</span>|_|<span class="params"> </span>|_|<span class="params">_</span>| |<span class="params">_\__, </span>|        |<span class="params">_</span>|_\___|<span class="params">_</span>|_|<span class="params">_\___/\__\___</span>|/ <span class="regexp">/ /</span> /</span><br><span class="line"> =========|<span class="params">_</span>|==============|<span class="params">___/===================================/_/_/_/</span></span><br><span class="line"><span class="params"> :: Spring Boot Remote :: 2.0.2.RELEASE</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">2015-06-10 18:25:06.632  INFO 14938 --- [           main] o.s.b.devtools.RemoteSpringApplication   : Starting RemoteSpringApplication on pwmbp with PID 14938 (/Users/pwebb/projects/spring-boot/code/spring-boot-devtools/target/classes started by pwebb <span class="keyword">in</span> /Users/pwebb/projects/spring-boot/code/spring-boot-samples/spring-boot-sample-devtools)</span></span><br><span class="line"><span class="params">2015-06-10 18:25:06.671  INFO 14938 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2a17b7b6: startup date [Wed Jun 10 18:25:06 PDT 2015]; root of context hierarchy</span></span><br><span class="line"><span class="params">2015-06-10 18:25:07.043  WARN 14938 --- [           main] o.s.b.d.r.c.RemoteClientConfiguration    : The connection to http://localhost:8080 is insecure. You should use a URL starting with &#x27;https://&#x27;.</span></span><br><span class="line"><span class="params">2015-06-10 18:25:07.074  INFO 14938 --- [           main] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729</span></span><br><span class="line"><span class="params">2015-06-10 18:25:07.130  INFO 14938 --- [           main] o.s.b.devtools.RemoteSpringApplication   : Started RemoteSpringApplication <span class="keyword">in</span> 0.74 seconds (JVM running <span class="keyword">for</span> 1.105)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为远程客户端使用与实际应用程序相同的类路径，它可以直接读取实际应用程序属性。这是 <code>spring.devtools.remote.secret</code> 属性被读取并传递给服务器进行身份验证的方法。</p>
</blockquote>
<blockquote>
<p>使用 <code>https://</code> 作为连接协议总是明智的，这样就可以加密传输并不能截获密码。</p>
</blockquote>
<blockquote>
<p>如果需要使用代理访问远程应用程序，配置 <code>spring.devtools.remote.proxy.host</code> 和 <code>spring.devtools.remote.proxy.port</code> 属性。</p>
</blockquote>
</li>
<li><p>远程更新</p>
<p>远程客户端监控您的应用程序类路径，以与<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-restart">本地重启</a>相同的方式进行更改。任何更新的资源都被推送到远程应用程序，并且（如果需要的话）触发重启。如果您在一个使用不本地化的云服务的特性上进行迭代，这将是很有帮助的。一般来说，远程更新和重新启动比完整的重建和部署周期要快得多。</p>
<blockquote>
<p>只在远程客户端运行时监视文件。如果在启动远程客户端之前更改一个文件，则不会将其推送到远程服务器。</p>
</blockquote>
</li>
</ol>
<h2 id="打包用于生产环境的应用程序"><a href="#打包用于生产环境的应用程序" class="headerlink" title="打包用于生产环境的应用程序"></a>打包用于生产环境的应用程序</h2><p>可执行 jar 可以用于生产部署。由于它们是自包含的，所以它们也非常适合基于云的部署。</p>
<p>对于额外的“生产就绪”特性，如健康、审计和度量 REST 或 JMX 端点，考虑添加 spring-boot-actuator。查看 *<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#production-ready">Spring Boot Actuator：生产就绪特性</a>*获取详细信息。</p>
<h2 id="下一步该读什么-1"><a href="#下一步该读什么-1" class="headerlink" title="下一步该读什么"></a>下一步该读什么</h2><p>现在您应该了解如何使用 Spring Boot 和您应该遵循的一些最佳实践。现在，您可以深入了解特定的 *<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features">Spring Boot 特性</a>*，或者您可以跳过，阅读 Spring Boot 的“<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#production-ready">生产就绪</a>”方面的内容。</p>
<h1 id="Spring-Boot-特性"><a href="#Spring-Boot-特性" class="headerlink" title="Spring Boot 特性"></a>Spring Boot 特性</h1><p>本节将深入介绍 Spring Boot 的详细信息。在这里，您可以了解您可能想要使用和定制的关键特性。如果您还没有这样做，您可能希望阅读“<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#getting-started">入门</a>”和“<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot">使用 Spring Boot</a>”部分，这样您就有了良好基础。</p>
<h2 id="SpringApplication"><a href="#SpringApplication" class="headerlink" title="SpringApplication"></a>SpringApplication</h2><p><code>SpringApplication</code> 类提供了一种方便的方法来引导从 <code>main()</code> 方法开始的 Spring 应用程序。在许多情况下，您可以委托给静态 <code>SpringApplication.run</code> 方法，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SpringApplication.run(MySpringConfiguration.class, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当你的应用程序启动时，你应该看到类似于如下输出：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___<span class="string">&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | &#x27;</span>_ |<span class="params"> &#x27;_</span>| |<span class="params"> &#x27;_ \/ _` </span>| \ \ \ \</span><br><span class="line"> \\/  ___)|<span class="params"> </span>|_)|<span class="params"> </span>| |<span class="params"> </span>| |<span class="params"> </span>||<span class="params"> (_</span>| |<span class="params">  ) ) ) )</span></span><br><span class="line"><span class="params">  &#x27;  </span>|____|<span class="params"> .__</span>|_|<span class="params"> </span>|_|<span class="params">_</span>| |<span class="params">_\__, </span>| / <span class="regexp">/ /</span> /</span><br><span class="line"> =========|<span class="params">_</span>|==============|<span class="params">___/=/_/_/_/</span></span><br><span class="line"><span class="params"> :: Spring Boot ::   v2.0.2.RELEASE</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">2013-07-31 00:08:16.117  INFO 56603 --- [           main] o.s.b.s.app.SampleApplication            : Starting SampleApplication v0.1.0 on mycomputer with PID 56603 (/apps/myapp.jar started by pwebb)</span></span><br><span class="line"><span class="params">2013-07-31 00:08:16.166  INFO 56603 --- [           main] ationConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@6e5a8246: startup date [Wed Jul 31 00:08:16 PDT 2013]; root of context hierarchy</span></span><br><span class="line"><span class="params">2014-03-04 13:09:54.912  INFO 41370 --- [           main] .t.TomcatServletWebServerFactory : Server initialized with port: 8080</span></span><br><span class="line"><span class="params">2014-03-04 13:09:56.501  INFO 41370 --- [           main] o.s.b.s.app.SampleApplication            : Started SampleApplication <span class="keyword">in</span> 2.992 seconds (JVM running <span class="keyword">for</span> 3.658)</span></span><br></pre></td></tr></table></figure>

<p>默认情况下，显示 <code>INFO</code> 日志消息，包括一些相关的启动细节，比如启动应用程序的用户。如果您需要一个除 <code>INFO</code> 之外的日志级别，您可以设置它，如<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-custom-log-levels">日志级别</a>。</p>
<h3 id="启动失败"><a href="#启动失败" class="headerlink" title="启动失败"></a>启动失败</h3><p>如果您的应用程序启动失败，注册的 <code>FailureAnalyzers</code> 将有机会提供专用的错误消息和解决问题的具体操作。例如，如果您在端口 <code>8080</code> 上启动 web 应用程序，并且该端口已经在使用，您应该会看到类似于以下消息的内容：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Embedded serv<span class="keyword">let</span> <span class="variable">container</span> failed to start. Port <span class="number">8080</span> was already <span class="keyword">in</span> <span class="keyword">use</span>.</span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Identify and stop the process that<span class="symbol">&#x27;s</span> listening on port <span class="number">8080</span> or configure this application to listen on another port.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Spring Boot 提供了大量的 <code>FailureAnalyzer</code> 实现，您可以<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#howto-failure-analyzer">添加自己的</a>。</p>
</blockquote>
<p>如果没有故障分析器能够处理异常，您仍然可以显示完整的情况报告，以便更好地理解错误。要做到这一点，您需要<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config">启用 <code>debug</code> 属性</a>或为 <code>org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener</code> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-custom-log-levels">启用 <code>DEBUG</code> 日志</a>记录。</p>
<p>例如，如果您正在使用 <code>java -jar</code> 运行您的应用程序，您可以使调试属性如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -jar myproject-<span class="number">0.0</span>.<span class="number">1</span>-<span class="variable constant_">SNAPSHOT</span>.jar --debug</span><br></pre></td></tr></table></figure>

<h3 id="定制横幅"><a href="#定制横幅" class="headerlink" title="定制横幅"></a>定制横幅</h3><p>可以通过向类路径中添加 <code>banner.txt</code> 文件或将 <code>spring.banner.location</code> 属性设置为此类文件的位置来更改在启动时打印的横幅。如果文件的编码不是 <code>UTF-8</code>，则可以设置 <code>spring.banner.charset</code>。除了文本文件之外，还可以向类路径中添加 <code>banner.gif</code>、<code>banner.jpg</code> 或 <code>banner.png</code> 图像文件，或者设置 <code>spring.banner.image.location</code> 属性。图像转换为 ASCII 艺术表示，并打印在任何文本横幅之上。</p>
<p>在 <code>banner.txt</code> 文件中, 您可以使用下列任何一个占位符：</p>
<table>
<thead>
<tr>
<th align="left">变量</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;application.version&#125;</code></td>
<td align="left">你的应用程序版本号，如 <code>MANIFEST.MF</code> 中声明的。比如，<code>Implementation-Version: 1.0</code> 打印为 <code>1.0</code>。</td>
</tr>
<tr>
<td align="left"><code>$&#123;application.formatted-version&#125;</code></td>
<td align="left">你的应用程序版本号，如 <code>MANIFEST.MF</code> 中声明的，格式化显示（被括号包裹，用 <code>v</code> 作前缀）。比如 <code>(v1.0)</code>。</td>
</tr>
<tr>
<td align="left"><code>$&#123;spring-boot.version&#125;</code></td>
<td align="left">你使用的 Spring Boot 版本。比如 <code>2.0.2.RELEASE</code>。</td>
</tr>
<tr>
<td align="left"><code>$&#123;spring-boot.formatted-version&#125;</code></td>
<td align="left">你使用的 Spring Boot 版本，格式化显示（被括号包裹，用 <code>v</code> 作前缀）。比如 <code>(v2.0.2.RELEASE)</code>。</td>
</tr>
<tr>
<td align="left"><code>$&#123;Ansi.NAME&#125;</code>（或 <code>$&#123;AnsiColor.NAME&#125;</code>, <code>$&#123;AnsiBackground.NAME&#125;</code>, <code>$&#123;AnsiStyle.NAME&#125;</code>）</td>
<td align="left">其中 <code>NAME</code> 是 ANSI 转义代码的名称。查看 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/ansi/AnsiPropertySource.java"><code>AnsiPropertySource</code></a> 获取详细信息。</td>
</tr>
<tr>
<td align="left"><code>$&#123;application.title&#125;</code></td>
<td align="left">你的应用程序的标题，如 <code>MANIFEST.MF</code> 中声明的。比如 <code>Implementation-Title: MyApp</code> 打印为 <code>MyApp</code>。</td>
</tr>
</tbody></table>
<blockquote>
<p>如果您想以编程的方式生成横幅，则可以使用 <code>SpringApplication.setBanner(…)</code> 方法。使用 <code>org.springframework.boot.Banner</code> 接口并实现您自己的 <code>printBanner()</code> 方法。<br> 你也可以使用 <code>spring.main.banner-mode</code> 属性决定横幅是否打印在 <code>System.out</code>（<code>console</code>） 上、发送到配置的日志记录器（<code>log</code>）、完全不产生（<code>off</code>）。</p>
</blockquote>
<p>在以下名称中，打印的横幅被注册为一个单例 bean：<code>springBootBanner</code>。</p>
<blockquote>
<p>YAML 映射 <code>off</code> 到 <code>false</code>，所以如果您想要禁用应用程序中的横幅，请确保添加引号，如下例所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  main:</span><br><span class="line">      banner-mode: <span class="string">&quot;off&quot;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="定制-SpringApplication"><a href="#定制-SpringApplication" class="headerlink" title="定制 SpringApplication"></a>定制 SpringApplication</h3><p>如果 <code>SpringApplication</code> 的默认值不符合您的喜好，您可以创建一个本地实例并自定义它。例如，要关闭横幅，你可以写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">SpringApplication</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(MySpringConfiguration.class);</span><br><span class="line">    app.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">    app.run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>传递给 <code>SpringApplication</code> 的构造函数参数是 Spring bean 的配置源。在大多数情况下，这些都是对 <code>@Configuration</code> 类的引用，但是它们也可以是对 XML 配置的引用，或者对应该被扫描的包的引用。</p>
</blockquote>
<p>也可以使用 <code>application.properties</code> 文件配置 <code>SpringApplication</code>。查看*<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config">外部化配置</a>*以获取详细信息。</p>
<p>有关配置选项的完整列表，查看 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/api/org/springframework/boot/SpringApplication.html"><code>SpringApplication</code> Javadoc</a>。</p>
<h3 id="Fluent-风格构建器-API"><a href="#Fluent-风格构建器-API" class="headerlink" title="Fluent 风格构建器 API"></a>Fluent 风格构建器 API</h3><p>如果您需要构建 <code>ApplicationContext</code> 层次结构（包含父&#x2F;子关系的多个上下文），或者您更喜欢使用“fluent”构建器 API，那么您可以使用 <code>SpringApplicationBuilder</code>。</p>
<p><code>SpringApplicationBuilder</code> 允许您将多个方法调用链接在一起，并包含让您创建层次结构的 <code>parent</code> 和 <code>child</code> 方法，如下例所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new SpringApplicationBuilder()</span><br><span class="line">        <span class="selector-class">.sources</span>(Parent<span class="selector-class">.class</span>)</span><br><span class="line">        <span class="selector-class">.child</span>(Application<span class="selector-class">.class</span>)</span><br><span class="line">        <span class="selector-class">.bannerMode</span>(Banner<span class="selector-class">.Mode</span><span class="selector-class">.OFF</span>)</span><br><span class="line">        <span class="selector-class">.run</span>(args);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在创建 <code>ApplicationContext</code> 层次结构时，有一些限制。例如，Web 组件<strong>必须</strong>包含在子上下文内，并且在父和子上下文环境中都使用相同的 <code>Environment</code>。请参阅 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/api/org/springframework/boot/builder/SpringApplicationBuilder.html"><code>SpringApplicationBuilder</code> Javadoc</a> 了解详细信息。</p>
</blockquote>
<h3 id="应用程序事件和监听器"><a href="#应用程序事件和监听器" class="headerlink" title="应用程序事件和监听器"></a>应用程序事件和监听器</h3><p>除了通常的 Spring Framework 事件（比如 <code>ContextRefreshedEvent</code>）之外，<code>SpringApplication</code> 还会发送一些附加的应用程序事件。</p>
<blockquote>
<p>在创建 <code>ApplicationContext</code> 之前，实际上触发了一些事件，因此不能将侦听器注册为 <code>@Bean</code>。您可以使用 <code>SpringApplication.addListeners(…)</code> 方法或 <code>SpringApplicationBuilder.listeners(…)</code> 方法注册它们。</p>
<p>如果您希望这些侦听器自动注册，不管应用程序是如何创建的，您都可以添加一个 <code>META-INF/spring.factories</code> 文件到您的项目，并通过使用 <code>org.springframework.context.ApplicationListener</code> 键来引用您的侦听器，如下例所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.context.ApplicationListener = com.example.project.MyListener</span><br></pre></td></tr></table></figure>
</blockquote>
<p>应用程序事件按以下顺序发送：</p>
<ol>
<li><code>ApplicationStartingEvent</code>，是在运行开始时发送的，但在任何处理之前，除了侦听器和初始化器的注册之外。</li>
<li><code>ApplicationEnvironmentPreparedEvent</code>，当 <code>Environment</code> 被使用时，在上下文被创建之前被发送。</li>
<li><code>ApplicationPreparedEvent</code>，在刷新之前发送，但是在加载 bean 定义之后。</li>
<li><code>ApplicationStartedEvent</code>，在调用上下文之后发送，但是在调用任何应用程序和命令行运行程序之前。</li>
<li><code>ApplicationReadyEvent</code>，在调用任何应用程序和命令行运行程序后发送。它表明应用程序已经准备好服务请求。</li>
<li><code>ApplicationFailedEvent</code>，如果启动时出现异常，则发送。</li>
</ol>
<blockquote>
<p>您通常不需要使用应用程序事件，但是知道它们的存在是很方便的。在内部，Spring Boot 使用事件来处理各种任务。</p>
</blockquote>
<p>使用 Spring Framework 的事件发布机制发送应用程序事件。该机制的一部分确保在子环境中发布给侦听器的事件也会在任何祖先上下文中被发布给侦听器。因此，如果您的应用程序使用了 <code>SpringApplication</code> 实例的层次结构，那么侦听器可能会接收到相同类型的应用程序事件的多个实例。</p>
<p>为了让您的侦听器区分事件的上下文和派生上下文的事件，它应该请求将其应用程序上下文注入，然后将注入的上下文与事件上下文进行比较。可以通过实现 <code>ApplicationContextAware</code> 或，如果侦听器是 bean，通过使用 <code>@Autowired</code> 来注入上下文。</p>
<h3 id="Web-环境"><a href="#Web-环境" class="headerlink" title="Web 环境"></a>Web 环境</h3><p><code>SpringApplication</code> 试图为您创建合适的 <code>ApplicationContext</code> 类型。用于确定 <code>WebEnvironmentType</code> 的算法相当简单：</p>
<ul>
<li>如果 Spring MVC 存在，则使用 <code>AnnotationConfigServletWebServerApplicationContext</code></li>
<li>如果 Spring MVC 不存在，Spring WebFlux 是存在的，那么就使用一个 <code>AnnotationConfigReactiveWebServerApplicationContext</code></li>
<li>否则，使用 <code>AnnotationConfigApplicationContext</code></li>
</ul>
<p>这意味着如果您使用 Spring MVC 和来自 Spring WebFlux 的新 <code>WebClient</code> 在相同的应用程序中，Spring MVC 将在默认情况下使用。您可以通过调用 <code>setWebApplicationType(WebApplicationType)</code> 来轻松覆盖它。</p>
<p>还可以完全控制调用 <code>setApplicationContextClass(…)</code> 所使用的 <code>ApplicationContext</code> 类型。</p>
<blockquote>
<p>在 JUnit 测试中使用 <code>SpringApplication</code> 时，通常需要调用 <code>setWebApplicationType(WebApplicationType.NONE)</code>。</p>
</blockquote>
<h3 id="访问应用程序参数"><a href="#访问应用程序参数" class="headerlink" title="访问应用程序参数"></a>访问应用程序参数</h3><p>如果您需要访问传递到 <code>SpringApplication.run(…)</code> 的应用程序参数，您可以注入一个 <code>org.springframework.boot.ApplicationArguments</code> bean。<code>ApplicationArguments</code> 接口提供了对原始 <code>String[]</code> 参数以及解析 <code>option</code> 和 <code>non-option</code> 参数的访问，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBean</span><span class="params">(ApplicationArguments args)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">debug</span> <span class="operator">=</span> args.containsOption(<span class="string">&quot;debug&quot;</span>);</span><br><span class="line">        List&lt;String&gt; files = args.getNonOptionArgs();</span><br><span class="line">        <span class="comment">// if run with &quot;--debug logfile.txt&quot; debug=true, files=[&quot;logfile.txt&quot;]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Spring Boot 还会在 Spring <code>Environment</code> 中注册一个 <code>CommandLinePropertySource</code>。这允许您使用 <code>@Value</code> 注解注入单个应用程序参数。</p>
<h3 id="使用-ApplicationRunner-或-CommandLineRunner"><a href="#使用-ApplicationRunner-或-CommandLineRunner" class="headerlink" title="使用 ApplicationRunner 或 CommandLineRunner"></a>使用 ApplicationRunner 或 CommandLineRunner</h3><p>如果您需要在 <code>SpringApplication</code> 启动之后运行一些特定的代码，您可以实现 <code>ApplicationRunner</code> 或 <code>CommandLineRunner</code> 接口。两个接口都以相同的方式工作，并提供了一个单独的运行方法，在 <code>SpringApplication.run(…)</code> 完成之前调用。</p>
<p><code>CommandLineRunner</code> 接口提供对应用程序参数的访问作为一个简单的字符串数组，而 <code>ApplicationRunner</code> 使用前面讨论的 <code>ApplicationArguments</code> 接口。下面的示例展示了一个使用 <code>run</code> 方法的 <code>CommandLineRunner</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        <span class="comment">// Do something...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果定义了多个 <code>CommandLineRunner</code> 或 <code>ApplicationRunner</code> bean，必须以特定的顺序调用它们，那么您可以额外地实现 <code>org.springframework.core.Ordered</code> 接口或使用 <code>org.springframework.core.annotation.Order</code> 注解。</p>
<h3 id="应用程序退出"><a href="#应用程序退出" class="headerlink" title="应用程序退出"></a>应用程序退出</h3><p>每个 <code>SpringApplication</code> 都向 JVM 注册一个关闭钩子，以确保 <code>ApplicationContext</code> 在退出时优雅地关闭。可以使用所有标准的 Spring 生命周期回调函数（如 <code>DisposableBean</code> bean 接口或 <code>@PreDestroy</code> 注解）。</p>
<p>此外，bean 可以实现 <code>org.springframework.boot.ExitCodeGenerator</code> 接口，如果希望当 <code>SpringApplication.exit()</code> 被调用时，返回特定的退出代码。然后可以将此退出代码传递给 <code>System.exit()</code>，以将其作为状态代码返回，如下面的示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExitCodeApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ExitCodeGenerator <span class="title function_">exitCodeGenerator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> () -&gt; <span class="number">42</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.exit(SpringApplication</span><br><span class="line">                .exit(SpringApplication.run(ExitCodeApplication.class, args)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此外，<code>ExitCodeGenerator</code> 接口也可以由异常来实现。当遇到这样的异常时，Spring Boot 返回由实现的 <code>getExitCode()</code> 方法提供的退出代码。</p>
<h3 id="管理员特性"><a href="#管理员特性" class="headerlink" title="管理员特性"></a>管理员特性</h3><p>通过指定 <code>spring.application.admin.enabled</code> 属性，可以为应用程序启用与 admin 相关的特性。这将在平台 <code>MBeanServer</code> 上公开 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/v2.0.2.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java"><code>SpringApplicationAdminMXBean</code></a>。您可以使用该特性远程管理您的 Spring Boot 应用程序。这个特性还可以用于任何服务包装器实现。</p>
<blockquote>
<p>如果您想知道应用程序正在运行哪个 HTTP 端口，请使用 <code>local.server.port</code> 的键获取该属性。</p>
</blockquote>
<blockquote>
<p><strong>谨慎</strong></p>
<p>在启用该特性时要注意，因为 MBean 公开了关闭应用程序的方法。</p>
</blockquote>
<h2 id="外部化配置（Externalized-Configuration）"><a href="#外部化配置（Externalized-Configuration）" class="headerlink" title="外部化配置（Externalized Configuration）"></a>外部化配置（Externalized Configuration）</h2><p>Spring Boot 允许您外部化您的配置，这样您就可以在不同的环境中使用相同的应用程序代码。您可以使用 properties 文件、YAML 文件、环境变量和命令行参数来外部化配置。属性值可以通过使用 <code>@Value</code> 注解直接注入到您的 bean 中，通过 Spring 的 <code>Environment</code> 抽象访问，或者通过 <code>@ConfigurationProperties</code> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config-typesafe-configuration-properties">绑定到结构化对象</a>。</p>
<p>Spring Boot 使用一种非常特殊的 <code>PropertySource</code> 命令，该命令旨在允许对值进行合理的覆盖。属性按以下顺序考虑：</p>
<ol>
<li>主目录上的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#using-boot-devtools-globalsettings">Devtools 全局设置属性</a>（<code>~/.spring-boot-devtools.properties</code>，当 devtools 激活时）</li>
<li>测试上的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.0.6.RELEASE/javadoc-api/org/springframework/test/context/TestPropertySource.html"><code>@TestPropertySource</code></a> 注解</li>
<li>测试上的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/api/org/springframework/boot/test/context/SpringBootTest.html"><code>@SpringBootTest#properties</code></a> 注解</li>
<li>命令行参数</li>
<li>来自 <code>SPRING_APPLICATION_JSON</code> 的属性（嵌入在环境变量或系统属性中的内联 JSON）</li>
<li><code>ServletConfig</code> 初始化参数</li>
<li><code>ServletContext</code> 初始化参数</li>
<li>来自 <code>java:comp/env</code> 的 JNDI 属性</li>
<li>Java 系统属性（<code>System.getProperties()</code>）</li>
<li>OS 环境变量</li>
<li><code>RandomValuePropertySource</code>，只在 <code>random.*</code> 中的属性</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties">指定 Profile 的应用程序 properties</a>，在打包好的 jar 之外（<code>application-&#123;profile&#125;.properties</code> 和 YAML variants）</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties">指定 Profile 的应用程序 properties</a>，打包在 jar 中（<code>application-&#123;profile&#125;.properties</code> 和 YAML variants）</li>
<li>应用程序属性，在打包好的 jar 之外（<code>application.properties</code> 和 YAML variants）</li>
<li>应用程序属性，打包在 jar 中（<code>application.properties</code> 和 YAML variants）</li>
<li><code>@Configuration</code> 类上的 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.0.6.RELEASE/javadoc-api/org/springframework/context/annotation/PropertySource.html"><code>@PropertySource</code></a> 注解</li>
<li>默认属性（通过设置 <code>SpringApplication.setDefaultProperties</code> 明确规定）</li>
</ol>
<p>为了提供一个具体的示例，假设您开发了一个使用 <code>name</code> 属性的 <code>@Component</code>，如下例所示：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;name&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在您的应用程序类路径（例如，在 jar 中）您可以有一个 <code>application.properties</code> 文件，为 <code>name</code> 提供一个合理的默认属性值。在新环境中运行时，可以在您的 jar 之外提供 <code>application.properties</code> 文件，以覆盖 <code>name</code>。对于一次性测试，您可以使用特定的命令行开关启动（例如，<code>java -jar app.jar --name=&quot;Spring&quot;</code>）。</p>
<blockquote>
<p><code>SPRING_APPLICATION_JSON</code> 属性可以在命令行上提供环境变量。例如：你可以在  UN*X shell 中使用如下行：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ SPRING_APPLICATION_JSON=&#x27;&#123;<span class="string">&quot;acme&quot;</span>:&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;test&quot;</span>&#125;&#125;&#x27; java -jar myapp.jar</span><br></pre></td></tr></table></figure>

<p>在前面的示例中，您在 Spring <code>Environment</code> 中最终得到了 <code>acme.name=test</code>。您也可以提供 JSON 如 <code>spring.application.json</code> 在系统属性中，如下例所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -Dspring.application.json=<span class="string">&#x27;&#123;&quot;name&quot;:&quot;test&quot;&#125;&#x27;</span> -jar myapp.jar</span><br></pre></td></tr></table></figure>

<p>您还可以使用命令行参数来提供 JSON，如下面的示例所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -jar myapp.jar --spring.application.json=<span class="string">&#x27;&#123;&quot;name&quot;:&quot;test&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>您还可以将 JSON 作为 JNDI 变量提供，如下所示：<code>java:comp/env/spring.application.json</code>。</p>
</blockquote>
<h3 id="配置随机值"><a href="#配置随机值" class="headerlink" title="配置随机值"></a>配置随机值</h3><p><code>RandomValuePropertySource</code> 用于注入随机值（例如，在机密或测试用例中）。它可以生成 integer、long、uuid 或 string，如下面的示例所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">my.secret=<span class="variable">$&#123;random.value&#125;</span></span><br><span class="line">my.number=<span class="variable">$&#123;random.int&#125;</span></span><br><span class="line">my.bignumber=<span class="variable">$&#123;random.long&#125;</span></span><br><span class="line">my.uuid=<span class="variable">$&#123;random.uuid&#125;</span></span><br><span class="line">my.number.less.than.ten=<span class="variable">$&#123;random.int(10)&#125;</span></span><br><span class="line">my.number.in.range=<span class="variable">$&#123;random.int[1024,65536]&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>random.int*</code> 语法是 <code>OPEN value (,max) CLOSE</code>，其中 <code>OPEN,CLOSE</code> 为任意字符、<code>value,max</code> 为 integer。如果 <code>max</code> 被提供，<code>value</code> 便是最小值、<code>max</code> 便是最大值（不包含）。</p>
<h3 id="访问命令行属性"><a href="#访问命令行属性" class="headerlink" title="访问命令行属性"></a>访问命令行属性</h3><p>在默认情况下，<code>SpringApplication</code> 会转换任何命令行选项参数（也就是说，参数以 <code>--</code> 开始，如 <code>--server.port=9000</code>）到一个属性，并将它们添加到 Spring <code>Environment</code> 中。如前所述，命令行属性总是优先于其他属性源。</p>
<p>如果您不希望将命令行属性添加到 <code>Environment</code> 中，您可以使用 <code>SpringApplication.setAddCommandLineProperties(false)</code> 禁用它们。</p>
<h3 id="应用程序属性文件"><a href="#应用程序属性文件" class="headerlink" title="应用程序属性文件"></a>应用程序属性文件</h3><p><code>SpringApplication</code> 从以下位置的 <code>application.properties</code> 文件加载属性，并将它们添加到Spring <code>Environment</code>：</p>
<ol>
<li>当前目录的 <code>/config</code> 子目录</li>
<li>当前目录</li>
<li>类路径的 <code>/config</code> 包</li>
<li>类路径根</li>
</ol>
<p>列表按优先顺序排序（在列表中较高的位置定义的属性覆盖在较低位置定义的属性）。</p>
<blockquote>
<p>你也可以<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config-yaml">使用 YAML (‘.yml’) 文件</a>代替“.properties”。</p>
</blockquote>
<p>如果您不喜欢 <code>application.properties</code> 作为配置文件名，可以通过指定 <code>spring.config.name</code> 环境属性切换到另一个文件名。您还可以使用 <code>spring.config.location</code> 环境属性来引用一个显式的位置（它是一个以逗号分隔的目录位置或文件路径列表）。下面的示例演示如何指定不同的文件名：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>java -jar myproject.jar --spring.config.name=myproject</span><br></pre></td></tr></table></figure>

<p>下面的示例演示如何指定两个位置：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar myproject.jar --spring.config.location=classpath:/<span class="literal">default</span>.properties,classpath:/<span class="keyword">override</span>.properties</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>spring.config.name</code> 和 <code>spring.config.location</code> 很早就被用于确定哪些文件必须被加载，因此它们必须被定义为环境属性（通常是一个 OS 环境变量、一个系统属性或一个命令行参数）。</p>
</blockquote>
<p>如果 <code>spring.config.location</code> 包含目录（相对于文件），它们应该以 &#x2F; 结束（并且在运行时，被附加到 <code>spring.config.name</code> 生成的名称，包括特定于 profile 的文件名)。<code>spring.config.location</code> 中指定的文件是按原样使用的，不支持特定于 profile 的变体，并且被任何特定于 profile 的属性覆盖。</p>
<p>配置位置按相反顺序搜索。默认情况下，配置的位置是 <code>classpath:/,classpath:/config/,file:./,file:./config/</code>。由此产生的搜索顺序如下：</p>
<ol>
<li><code>file:./config/</code></li>
<li><code>file:./</code></li>
<li><code>classpath:/config/</code></li>
<li><code>classpath:/</code></li>
</ol>
<p>当自定义配置位置使用 <code>spring.config.location</code> 配置时，它们替换默认的位置。例如，如果 <code>spring.config.location</code> 配置为值：<code>classpath:/custom-config/,file:./custom-config/</code>，搜索顺序如下：</p>
<ol>
<li><code>file:./custom-config/</code></li>
<li><code>classpath:custom-config/</code></li>
</ol>
<p>或者，当自定义配置位置使用 <code>spring.config.additional-location</code> 配置时，除了默认位置外，还使用它们。在默认位置之前搜索额外的位置。例如，如果额外的位置配置为 <code>classpath:/custom-config/,file:./custom-config/</code>，搜索顺序如下：</p>
<ol>
<li><code>file:./custom-config/</code></li>
<li><code>classpath:custom-config/</code></li>
<li><code>file:./config/</code></li>
<li><code>file:./</code></li>
<li><code>classpath:/config/</code></li>
<li><code>classpath:/</code></li>
</ol>
<p>这个搜索排序允许您在一个配置文件中指定默认值，然后在另一个配置文件中选择性地覆盖这些值。您可以在位于默认位置之一的 <code>application.properties</code> 中为应用程序提供默认值（或您在 <code>spring.config.name</code> 中选择的其他 basename）。这些默认值可以在运行时被定制的位置中放置的一个不同的文件重写。</p>
<blockquote>
<p>如果您使用环境变量而不是系统属性，大多数操作系统都不允许使用句号分隔的键名，但是您可以使用下划线（例如，<code>SPRING_CONFIG_NAME</code> 而不是 <code>spring.config.name</code>）。</p>
</blockquote>
<blockquote>
<p>如果应用程序在容器中运行，那么可以使用 JNDI 属性（在 <code>java:comp/env</code> 中）或 servlet 上下文初始化参数，而不是环境变量或系统属性。</p>
</blockquote>
<h3 id="特定于-Profile-属性"><a href="#特定于-Profile-属性" class="headerlink" title="特定于 Profile 属性"></a>特定于 Profile 属性</h3><p>除了 <code>application.properties</code> 文件，特定于 profile 的属性也可以通过使用以下命名约定来定义：<code>application-&#123;profile&#125;.properties</code>。<code>Environment</code> 中有一组默认 profile（默认情况下是 <code>[default]</code>），如果没有设置激活的 profile，则使用默认 profile。换句话说，如果没有显式地激活 profile，那么就会加载 <code>application-default.properties</code>。</p>
<p>特定于 profile 的属性从相同的位置加载到标准 <code>application.properties</code> 中，特定于 profile的文件总是覆盖非特定的文件，无论特定于 profile 的文件是否在您的打包 jar 内或外部。</p>
<p>如果指定了多个 profile，则应用最后的策略。例如，<code>spring.profiles.active</code> 属性指定的 profile，在通过 <code>SpringApplication</code> API 配置后，被添加，因此优先。</p>
<blockquote>
<p>如果您在 <code>spring.config.location</code> 中指定了任何文件，这些文件特定于 profile 的变体不会被考虑。如果您还想使用特定于 profile 的属性，使用在 <code>spring.config.location</code> 中的目录。</p>
</blockquote>
<h3 id="属性中的占位符"><a href="#属性中的占位符" class="headerlink" title="属性中的占位符"></a>属性中的占位符</h3><p>在 <code>application.properties</code> 中的值在使用时通过现有 <code>Environment</code> 进行过滤，因此您可以引用之前定义的值（例如，从系统属性）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.name=MyApp</span><br><span class="line">app.description=<span class="variable">$&#123;app.name&#125;</span> is a Spring Boot application</span><br></pre></td></tr></table></figure>

<blockquote>
<p>您还可以使用此技术创建存在于 Spring Boot 属性中的“短”变体。请参阅*<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#howto-use-short-command-line-arguments">使用“短”命令行参数</a>*来获取详细信息。</p>
</blockquote>
<h3 id="使用-YAML-代替-Properties"><a href="#使用-YAML-代替-Properties" class="headerlink" title="使用 YAML 代替 Properties"></a>使用 YAML 代替 Properties</h3><p><a target="_blank" rel="noopener" href="http://yaml.org/">YAML</a> 是 JSON 的超集，因此，它是一种用于指定分层配置数据的方便格式。当您的类路径上有 <a target="_blank" rel="noopener" href="http://www.snakeyaml.org/">SnakeYAML</a> 库时，<code>SpringApplication</code> 类会自动支持 YAML 作为属性的替代品。</p>
<blockquote>
<p>如果你使用“启动器”，SnakeYAML 是由 <code>spring-boot-starter</code> 自动提供的。</p>
</blockquote>
<ol>
<li><p><strong>加载 YAML</strong></p>
<p>Spring 框架提供了两个方便的类，可以用来加载 YAML 文档。<code>YamlPropertiesFactoryBean</code> 将 YAML 加载为 <code>Properties</code>，而 <code>YamlMapFactoryBean</code> 将 YAML 加载为 <code>Map</code>。</p>
<p>例如，考虑以下 YAML 文档：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">environments:</span><br><span class="line">    dev:</span><br><span class="line">        url: http:<span class="comment">//dev.example.com</span></span><br><span class="line">        name: Developer Setup</span><br><span class="line">    prod:</span><br><span class="line">        url: http:<span class="comment">//another.example.com</span></span><br><span class="line">        name: My Cool App</span><br></pre></td></tr></table></figure>

<p>前面的示例将转换为以下属性：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">environments.dev.url=http:<span class="comment">//dev.example.com</span></span><br><span class="line">environments.dev.name=Developer Setup</span><br><span class="line">environments.prod.url=http:<span class="comment">//another.example.com</span></span><br><span class="line">environments.prod.name=My Cool App</span><br></pre></td></tr></table></figure>

<p>YAML 列表表示为 <code>[index]</code> 引用的属性键。例如，考虑以下 YAML：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">my:</span><br><span class="line">servers:</span><br><span class="line">    - dev.example.com</span><br><span class="line">    - another.example.com</span><br></pre></td></tr></table></figure>

<p>前面的示例将转换为这些属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my.servers[0]=dev.example.com</span><br><span class="line">my.servers[1]=another.example.com</span><br></pre></td></tr></table></figure>

<p>要使用 Spring Boot 的 <code>Binder</code> 工具（这是 <code>@ConfigurationProperties</code> 所做的）来绑定到这样的属性，您需要在 <code>java.util.List</code>（或 <code>Set</code>）类型的目标 bean 中拥有一个属性，您要么需要提供一个 setter，要么用一个可变值初始化它。例如，下面的示例绑定到前面显示的属性：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">&quot;my&quot;</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    private <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; servers = <span class="keyword">new</span> ArrayList&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line"></span><br><span class="line">    public <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; getServers() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.servers;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在 Spring Environment 中暴露 YAML 作为 Properties</strong></p>
<p><code>YamlPropertySourceLoader</code> 类可以用于在 Spring <code>Environment</code> 中将 YAML 作为 <code>PropertySource</code> 公开。这样做可以让您使用带有占位符语法的 <code>@Value</code> 注解来访问 YAML 属性。</p>
</li>
<li><p><strong>多 profile 的 YAML 文档</strong></p>
<p>您可以使用 <code>spring.profiles</code> 键在单个文件中指定多个特定于 profile 的 YAML 文档，以指示文档何时应用，如以下示例所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">    address: <span class="number">192.168</span>.<span class="number">1.100</span></span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">    profiles: development</span><br><span class="line">server:</span><br><span class="line">    address: <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">    profiles: production</span><br><span class="line">server:</span><br><span class="line">    address: <span class="number">192.168</span>.<span class="number">1.120</span></span><br></pre></td></tr></table></figure>

<p>在前面的示例中，如果 <code>development</code> profile 是激活的，则 <code>server.address</code> 属性是 <code>127.0.0.1</code>。类似地，如果 <code>production</code> profile 是激活的，则 <code>server.address</code> 属性是 <code>192.168.1.120</code>。如果<strong>未</strong>启用 <code>development</code> 和 <code>production</code> profile，则该属性的值为 <code>192.168.1.100</code>。</p>
<p>如果在应用程序上下文启动时没有显式激活，则会激活默认 profile。因此，在接下来的 YAML 中，我们为 <code>spring.security.user.password</code> 设置了一个值，<strong>仅</strong>在 “default” profile 中可用：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: <span class="number">8000</span></span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: <span class="keyword">default</span></span><br><span class="line">  security:</span><br><span class="line">    user:</span><br><span class="line">      password: <span class="keyword">weak</span></span><br></pre></td></tr></table></figure>

<p>然而，在下面的例子中，密码总是被设置，因为它没有附加到任何 profile，而且必须在必要时显式地重置所有其他 profile：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: <span class="number">8000</span></span><br><span class="line">spring:</span><br><span class="line">  security:</span><br><span class="line">    user:</span><br><span class="line">      password: <span class="keyword">weak</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>spring.profiles</code> 元素指定的 Spring profile 可以选择性地使用 <code>!</code> 字符否定。如果为单个文档指定了否定和非否定的 profile，那么至少有一个非否定的 profile 必须匹配，并且没有任何被否定的 profile 可能匹配。</p>
</li>
<li><p><strong>YAML 缺陷</strong></p>
<p>YAML 文件不能通过使用 <code>@PropertySource</code> 注解来加载。因此，在需要以这种方式加载值的情况下，需要使用 properties 文件。</p>
</li>
</ol>
<h3 id="类型安全的配置属性"><a href="#类型安全的配置属性" class="headerlink" title="类型安全的配置属性"></a>类型安全的配置属性</h3><p>使用 <code>@Value(&quot;$&#123;property&#125;&quot;)</code> 注解注入配置属性有时会很麻烦，特别是如果您使用的是多个属性，或者您的数据在本质上是分层的。Spring Boot 提供了一种处理属性的替代方法，可以让强类型 bean 管理和验证应用程序的配置，如下面的示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(&quot;acme&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AcmeProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> enabled;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> InetAddress remoteAddress;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Security</span> <span class="variable">security</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Security</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEnabled</span><span class="params">(<span class="type">boolean</span> enabled)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> InetAddress <span class="title function_">getRemoteAddress</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemoteAddress</span><span class="params">(InetAddress remoteAddress)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Security <span class="title function_">getSecurity</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Security</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; roles = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Collections.singleton(<span class="string">&quot;USER&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getRoles</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoles</span><span class="params">(List&lt;String&gt; roles)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前面的 POJO 定义了以下属性：</p>
<ul>
<li><code>acme.enabled</code>，默认值为 <code>false</code></li>
<li><code>acme.remote-address</code>，一个可以从 <code>String</code> 强转的类型</li>
<li><code>acme.security.username</code>，使用嵌套的“security”对象，其名称由属性的名称决定。特别是，返回类型在那里没有使用，并且可能是 <code>SecurityProperties</code></li>
<li><code>acme.security.password</code></li>
<li><code>acme.security.roles</code>，String 集合</li>
</ul>
<blockquote>
<p>getter 和 setter 通常是强制的，因为绑定是通过标准的 Java bean 属性描述符，就像在 Spring MVC 中一样。在下列情况下，可以省略 setter：</p>
<ul>
<li>Map，只要它们被初始化，就需要一个 getter，但不一定需要 setter，因为它们可以由绑定器进行更改。</li>
<li>可以通过索引（通常是 YAML）或使用单个逗号分隔值（属性）来访问集合和数组。在后一种情况下，setter 是强制的。我们建议总是为这种类型添加一个 setter。如果您初始化一个集合，请确保它不是不可变的（就像前面的例子）。</li>
<li>如果嵌套的 POJO 属性被初始化（比如前面示例中的 Security 字段），则不需要 setter。如果您希望绑定器使用它的默认构造函数来动态创建实例，那么您需要一个 setter。</li>
</ul>
<p>有些人使用项目 Lombok 自动添加 getter 和 setter。确保 Lombok 不会为这种类型生成任何特定的构造函数，因为它是由容器自动使用来实例化对象的。<br> 最后，只考虑标准的 Java Bean 属性，不支持对静态属性的绑定。</p>
</blockquote>
<blockquote>
<p>也可参考 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#boot-features-external-config-vs-value"><code>@Value</code> 和 <code>@ConfigurationProperties</code> 的区别</a>。</p>
</blockquote>
<p>您还需要列出在 <code>@EnableConfigurationProperties</code> 注解中注册的属性类，如下例所示：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(AcmeProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当 <code>@ConfigurationProperties</code> bean 以这种方式注册时，bean 有一个常规名称： <code>&lt;prefix&gt;-&lt;fqn&gt;</code>，其中 <code>&lt;prefix&gt;</code> 是 <code>@ConfigurationProperties</code> 注解中指定的环境键前缀，<code>&lt;fqn&gt;</code> 是 bean 的完全限定名称。如果注解没有提供任何前缀，则只使用 bean 的完全限定名。<br> 上面示例中的 bean 名称是 <code>acme-com.example.AcmeProperties</code>。</p>
</blockquote>
<p>即使前面的配置为 <code>AcmeProperties</code> 创建了一个常规 bean，我们建议 <code>@ConfigurationProperties</code> 只处理环境，特别是不从上下文注入其他 bean。已经说过，<code>@EnableConfigurationProperties</code> 注解也会自动地应用到您的项目中，这样就可以从 <code>Environment</code> 中配置任何带有 <code>@ConfigurationProperties</code> 的现有 bean。您可以通过确保 <code>AcmeProperties</code> 已经是一个 bean 来快捷地进行 <code>MyConfiguration</code>，如下面的示例所示：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix=<span class="string">&quot;acme&quot;</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... see the preceding example</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种类型的配置与 <code>SpringApplication</code> 外部 YAML 配置特别有效，如下例所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># application<span class="selector-class">.yml</span></span><br><span class="line"></span><br><span class="line">acme:</span><br><span class="line">    remote-address: <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line">    security:</span><br><span class="line">        username: admin</span><br><span class="line">        roles:</span><br><span class="line">          - USER</span><br><span class="line">          - ADMIN</span><br><span class="line"></span><br><span class="line"># additional configuration as required</span><br></pre></td></tr></table></figure>

<p>要使用 <code>@ConfigurationProperties</code> bean，您可以像其他 bean 一样注入它们，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AcmeProperties properties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">(AcmeProperties properties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.properties = properties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">openConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="built_in">this</span>.properties.getRemoteAddress());</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 <code>@ConfigurationProperties</code> 还可以生成可以被 IDE 使用的 metadata 文件，为您自己的键提供自动完成。详见<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.2.RELEASE/reference/htmlsingle/#configuration-metadata">附录 B <em>配置 Metadata</em></a>。</p>
</blockquote>
<ol>
<li><strong>第三方配置</strong></li>
</ol>
<p>除了使用 <code>@ConfigurationProperties</code> 来注解一个类之外，还可以在 public <code>@Bean</code> 方法上使用它。当您希望将属性绑定到控件之外的第三方组件时，这样做尤其有用。</p>
<p>要从 <code>Environment</code> 属性配置 bean，请将 <code>@ConfigurationProperties</code> 添加到它的 bean 注册，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;another&quot;)</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> AnotherComponent <span class="title function_">anotherComponent</span><span class="params">()</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用 <code>another</code> 前缀定义的任何属性都被映射到与前面的 <code>AcmeProperties</code> 示例类似的 <code>AnotherComponent</code> bean。</p>
<ol>
<li><strong>松散绑定</strong></li>
</ol>
<p>Spring Boot 使用一些松散的规则将 Environment 属性绑定到 @ConfigurationProperties  bean，因此 Environment 属性名和 bean 属性名之间不需要精确匹配。常见的示例中，这是有用的，其中包括短横线分隔的环境属性（例如，context-path 绑定到 contextPath），以及大写的环境属性（例如，PORT 绑定到 port）。</p>
<p>例如，考虑以下 @ConfigurationProperties 类：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix=<span class="string">&quot;acme.my-project.person&quot;</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OwnerProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String getFirstName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> void setFirstName(String firstName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在前面的示例中，可以使用以下属性名称：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>acme.my-project.person.first-name</td>
<td>Kebab 风格，推荐使用在 .properties 和 .yml 文件中</td>
</tr>
<tr>
<td>acme.myProject.person.firstName</td>
<td>标准驼峰语法</td>
</tr>
<tr>
<td>acme.my_project.person.first_name</td>
<td>下划线符号，使用在 .properties 和 .yml 文件中的替代格式</td>
</tr>
<tr>
<td>ACME_MYPROJECT_PERSON_FIRSTNAME</td>
<td>大写格式，推荐系统环境变量使用</td>
</tr>
</tbody></table>
<blockquote>
<p>注解的 prefix 必须是 kebab 风格（小写字母、- 分隔，如 acme.my-project.person）。</p>
</blockquote>
<table>
<thead>
<tr>
<th>属性源</th>
<th>简单的</th>
<th>List</th>
</tr>
</thead>
<tbody><tr>
<td>Properties Files</td>
<td>Camel case、kebab case 或 underscore notation</td>
<td>Standard list syntax using [ ] or comma-separated values</td>
</tr>
<tr>
<td>YAML Files</td>
<td>Camel case、kebab case 或 underscore notation</td>
<td>Standard YAML list syntax or comma-separated values</td>
</tr>
<tr>
<td>Environment Variables</td>
<td>使用下划线作为定界符的大写格式。_ 不应该在属性名称中使用</td>
<td>Numeric values surrounded by underscores, such as MY_ACME_1_OTHER &#x3D; my.acme[1].other</td>
</tr>
<tr>
<td>System properties</td>
<td>Camel case、kebab case 或 underscore notation</td>
<td>Standard list syntax using [ ] or comma-separated values</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">xyz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://sv.pointcut.cc/blog/springboot/Spring%20Boot%202%20%E5%AE%98%E6%96%B9%E6%8C%87%E5%AF%BC%E6%89%8B%E5%86%8C%E8%AF%91%E6%96%87/">http://sv.pointcut.cc/blog/springboot/Spring Boot 2 官方指导手册译文/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://sv.pointcut.cc" target="_blank">XYZhi's学习笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springboot/">springboot</a></div><div class="post_share"></div></div><div class="post-nav"><a class="pre" href="/blog/springboot/SpringBoot%E5%BE%88%E5%A5%BD%E7%94%A8%E7%9A%84%E4%B8%80%E7%BB%84%20Condition%20%E2%80%94%E2%80%94%20AllNestedConditions%20AnyNestedCondition%20NoneNestedConditions/">SpringBoot很好用的一组 Condition —— AllNestedConditions AnyNestedCondition NoneNestedConditions</a><a class="next" href="/blog/springboot/04-%E8%87%AA%E5%AE%9A%E4%B9%89start/">04-自定义start</a></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">xyz</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">301</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Gradle-%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">Gradle 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-Spring-Boot-%E7%9A%84%E4%B8%80%E4%B8%AA%E6%97%A9%E6%9C%9F%E7%9A%84%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7"><span class="toc-number">2.</span> <span class="toc-text">从 Spring Boot 的一个早期的版本升级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA-Spring-Boot-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number"></span> <span class="toc-text">开发你的第一个 Spring Boot 应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-POM"><span class="toc-number">1.</span> <span class="toc-text">创建 POM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%B1%BB%E8%B7%AF%E5%BE%84%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="toc-number">2.</span> <span class="toc-text">添加类路径依赖项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">3.</span> <span class="toc-text">编写你的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E8%BF%99%E4%B8%AA%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.</span> <span class="toc-text">运行这个示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84-jar"><span class="toc-number">5.</span> <span class="toc-text">创建一个可执行的 jar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E8%AF%BB%E4%BB%80%E4%B9%88"><span class="toc-number"></span> <span class="toc-text">下一步该读什么</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Spring-Boot"><span class="toc-number"></span> <span class="toc-text">使用 Spring Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F"><span class="toc-number"></span> <span class="toc-text">构建系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">依赖管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven"><span class="toc-number"></span> <span class="toc-text">Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Gradle"><span class="toc-number">1.</span> <span class="toc-text">Gradle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">启动器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E7%BB%87%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number"></span> <span class="toc-text">组织你的代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E2%80%9Cdefault%E2%80%9D%E5%8C%85"><span class="toc-number">1.</span> <span class="toc-text">使用“default”包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D%E4%B8%BB%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">定位主应用程序类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-number"></span> <span class="toc-text">配置类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E9%99%84%E5%8A%A0%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">导入附加的配置类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-XML-%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">导入 XML 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number"></span> <span class="toc-text">自动配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%90%E6%AD%A5%E5%8F%96%E4%BB%A3%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">逐步取代自动配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%81%E7%94%A8%E7%89%B9%E5%AE%9A%E7%9A%84%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">禁用特定的自动配置类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Bean-%E5%92%8C%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-number"></span> <span class="toc-text">Spring Bean 和依赖注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-SpringBootApplication-%E6%B3%A8%E8%A7%A3"><span class="toc-number"></span> <span class="toc-text">使用 @SpringBootApplication 注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number"></span> <span class="toc-text">运行你的应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-IDE-%E8%BF%90%E8%A1%8C"><span class="toc-number">1.</span> <span class="toc-text">从 IDE 运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C"><span class="toc-number">2.</span> <span class="toc-text">作为打包应用程序运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Maven-%E6%8F%92%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">使用 Maven 插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Gradle-%E6%8F%92%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">使用 Gradle 插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E4%BA%A4%E6%8D%A2"><span class="toc-number">5.</span> <span class="toc-text">热交换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="toc-number"></span> <span class="toc-text">开发者工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">1.</span> <span class="toc-text">属性默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF"><span class="toc-number">2.</span> <span class="toc-text">自动重启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LiveReload"><span class="toc-number">3.</span> <span class="toc-text">LiveReload</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">全局设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.</span> <span class="toc-text">远程应用程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E7%94%A8%E4%BA%8E%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number"></span> <span class="toc-text">打包用于生产环境的应用程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E8%AF%BB%E4%BB%80%E4%B9%88-1"><span class="toc-number"></span> <span class="toc-text">下一步该读什么</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Boot-%E7%89%B9%E6%80%A7"><span class="toc-number"></span> <span class="toc-text">Spring Boot 特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringApplication"><span class="toc-number"></span> <span class="toc-text">SpringApplication</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5"><span class="toc-number">1.</span> <span class="toc-text">启动失败</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E6%A8%AA%E5%B9%85"><span class="toc-number">2.</span> <span class="toc-text">定制横幅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6-SpringApplication"><span class="toc-number">3.</span> <span class="toc-text">定制 SpringApplication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fluent-%E9%A3%8E%E6%A0%BC%E6%9E%84%E5%BB%BA%E5%99%A8-API"><span class="toc-number">4.</span> <span class="toc-text">Fluent 风格构建器 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">应用程序事件和监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-%E7%8E%AF%E5%A2%83"><span class="toc-number">6.</span> <span class="toc-text">Web 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%8F%82%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">访问应用程序参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ApplicationRunner-%E6%88%96-CommandLineRunner"><span class="toc-number">8.</span> <span class="toc-text">使用 ApplicationRunner 或 CommandLineRunner</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E9%80%80%E5%87%BA"><span class="toc-number">9.</span> <span class="toc-text">应用程序退出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%91%98%E7%89%B9%E6%80%A7"><span class="toc-number">10.</span> <span class="toc-text">管理员特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE%EF%BC%88Externalized-Configuration%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">外部化配置（Externalized Configuration）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%9A%8F%E6%9C%BA%E5%80%BC"><span class="toc-number">1.</span> <span class="toc-text">配置随机值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B1%9E%E6%80%A7"><span class="toc-number">2.</span> <span class="toc-text">访问命令行属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">应用程序属性文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E4%BA%8E-Profile-%E5%B1%9E%E6%80%A7"><span class="toc-number">4.</span> <span class="toc-text">特定于 Profile 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E4%B8%AD%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">5.</span> <span class="toc-text">属性中的占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-YAML-%E4%BB%A3%E6%9B%BF-Properties"><span class="toc-number">6.</span> <span class="toc-text">使用 YAML 代替 Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">7.</span> <span class="toc-text">类型安全的配置属性</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/springcloud/nacos%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/05-Nacos%E4%B8%AD%E7%9A%84AbstractNacosTaskExecuteEngine/" title="05-Nacos中的AbstractNacosTaskExecuteEngine">05-Nacos中的AbstractNacosTaskExecuteEngine</a><time datetime="2021-11-27T12:00:40.000Z" title="发表于 2021-11-27 20:00:40">2021-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/springcloud/nacos%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/04-Server%E5%92%8CClient%E5%8A%A8%E6%80%81%E8%8E%B7%E5%8F%96nacos%E5%9C%B0%E5%9D%80/" title="04-Server和Client动态获取nacos地址">04-Server和Client动态获取nacos地址</a><time datetime="2021-11-27T12:00:39.000Z" title="发表于 2021-11-27 20:00:39">2021-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/springcloud/nacos%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/03-Nacos%E7%9A%84%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/" title="03-Nacos的发布与订阅">03-Nacos的发布与订阅</a><time datetime="2021-11-27T12:00:38.000Z" title="发表于 2021-11-27 20:00:38">2021-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/springcloud/nacos%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/02-Nacos%20Server%E4%B8%AD%E7%9A%84Secured%E6%B3%A8%E8%A7%A3/" title="02-Nacos Server中的Secured注解">02-Nacos Server中的Secured注解</a><time datetime="2021-11-27T12:00:37.000Z" title="发表于 2021-11-27 20:00:37">2021-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/springcloud/nacos%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/01-Nacos%20Server%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E8%A1%A8%E7%9A%84%E5%86%99%E6%97%B6%E5%A4%8D%E5%88%B6/" title="01-Nacos Server服务注册表的写时复制">01-Nacos Server服务注册表的写时复制</a><time datetime="2021-11-27T12:00:36.000Z" title="发表于 2021-11-27 20:00:36">2021-11-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/XieYueZhi/cdn/md/1647876415-280c8d.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By xyz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Algolia</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>